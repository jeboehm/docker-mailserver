services:
  # Fetchmail is used to fetch emails from external servers
  # and deliver them to the local mail server. Can be removed
  # if you don't need it.
  fetchmail:
    image: ghcr.io/jeboehm/fetchmailmgr:0.4.0
    restart: on-failure:5
    command:
      - --interval
      - ${FETCHMAIL_INTERVAL}
    env_file: ../../.env
    environment:
      DEBUG: "true"
      FETCHMAIL_USE_LMTP: "true"
      FETCHMAIL_SMTP_ADDRESS: "mda:2003"
    tmpfs:
      - /run/fetchmailmgr:mode=0755,uid=65534,gid=65534
    read_only: true
    depends_on:
      - redis
