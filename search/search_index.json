{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"docker-mailserver Documentation docker-mailserver is a containerized email server solution inspired by the ISPMail guide . It provides a secure, customizable email infrastructure that runs on Docker or Kubernetes. Overview This project enables you to operate your own email services, providing independence from large email providers. The solution is built on Alpine Linux and vendor base images, keeping container images lightweight while maintaining comprehensive functionality. Documentation structure The documentation is organised by purpose: Tutorial: Getting Started \u2014 A step-by-step lesson to install docker-mailserver with Docker Compose and create your first mailbox. How-to guides \u2014 Task-oriented guides for specific goals: install with Docker , install on Kubernetes , configure DNS , configure TLS , manage users , and more. Reference \u2014 Technical descriptions: environment variables , DNS records , ports , service architecture , user roles , and related topics. Explanation \u2014 Background and context: architecture , DNS and email delivery , observability . Key features Email protocols: POP3, IMAP, and SMTP with user authentication Web management: Web-based interface for account, domain, and alias administration Webmail: Integrated webmail interface External mail retrieval: Fetchmail integration for retrieving emails from external providers Email authentication: DKIM message signing for email authenticity Spam filtering: Server-side mail filtering with configurable rules via web frontend Spam training: Train spam filters by moving emails to or from the junk folder Real-time protection: RBL integration for spam prevention Greylisting: Selective greylisting for likely spam Address management: Catch-all addresses, send-only accounts, local address extension (RFC 5233) Security: Sender address restrictions and configurable address extensions Quota management: Email quota management with notifications TLS: Enforced TLS for secure communication Full-text search: FTS support for efficient message searching Health monitoring: Continuous self-monitoring via Docker healthcheck Quick start Tutorial: Getting Started \u2014 Install with Docker Compose and create your first account How to install with Docker \u2014 Docker Compose installation steps How to install on Kubernetes \u2014 Kubernetes deployment steps How to upgrade \u2014 Upgrade procedures and upgrade changelog Service architecture The mailserver consists of multiple microservices: MTA (Mail Transfer Agent) \u2014 Postfix for SMTP MDA (Mail Delivery Agent) \u2014 Dovecot for IMAP/POP3 Web \u2014 Admin interface and Roundcube webmail Filter \u2014 RSpamd for spam filtering SSL \u2014 Certificate generation and management Database \u2014 MySQL for user and configuration data Redis \u2014 Caching and session storage Unbound \u2014 DNS resolver for the filter service Fetchmail \u2014 External mail retrieval (optional) See Service architecture reference for a concise list and About the service architecture for context. Getting help GitHub Issues \u2014 Report bugs and request features Releases \u2014 View release notes and changelog Container images Container images are available at: GitHub Container Registry Docker Hub Component references Dovecot Documentation Postfix Documentation Rspamd Documentation Roundcube Documentation Redis Documentation Unbound Documentation Star history","title":"Welcome"},{"location":"#docker-mailserver-documentation","text":"docker-mailserver is a containerized email server solution inspired by the ISPMail guide . It provides a secure, customizable email infrastructure that runs on Docker or Kubernetes.","title":"docker-mailserver Documentation"},{"location":"#overview","text":"This project enables you to operate your own email services, providing independence from large email providers. The solution is built on Alpine Linux and vendor base images, keeping container images lightweight while maintaining comprehensive functionality.","title":"Overview"},{"location":"#documentation-structure","text":"The documentation is organised by purpose: Tutorial: Getting Started \u2014 A step-by-step lesson to install docker-mailserver with Docker Compose and create your first mailbox. How-to guides \u2014 Task-oriented guides for specific goals: install with Docker , install on Kubernetes , configure DNS , configure TLS , manage users , and more. Reference \u2014 Technical descriptions: environment variables , DNS records , ports , service architecture , user roles , and related topics. Explanation \u2014 Background and context: architecture , DNS and email delivery , observability .","title":"Documentation structure"},{"location":"#key-features","text":"Email protocols: POP3, IMAP, and SMTP with user authentication Web management: Web-based interface for account, domain, and alias administration Webmail: Integrated webmail interface External mail retrieval: Fetchmail integration for retrieving emails from external providers Email authentication: DKIM message signing for email authenticity Spam filtering: Server-side mail filtering with configurable rules via web frontend Spam training: Train spam filters by moving emails to or from the junk folder Real-time protection: RBL integration for spam prevention Greylisting: Selective greylisting for likely spam Address management: Catch-all addresses, send-only accounts, local address extension (RFC 5233) Security: Sender address restrictions and configurable address extensions Quota management: Email quota management with notifications TLS: Enforced TLS for secure communication Full-text search: FTS support for efficient message searching Health monitoring: Continuous self-monitoring via Docker healthcheck","title":"Key features"},{"location":"#quick-start","text":"Tutorial: Getting Started \u2014 Install with Docker Compose and create your first account How to install with Docker \u2014 Docker Compose installation steps How to install on Kubernetes \u2014 Kubernetes deployment steps How to upgrade \u2014 Upgrade procedures and upgrade changelog","title":"Quick start"},{"location":"#service-architecture","text":"The mailserver consists of multiple microservices: MTA (Mail Transfer Agent) \u2014 Postfix for SMTP MDA (Mail Delivery Agent) \u2014 Dovecot for IMAP/POP3 Web \u2014 Admin interface and Roundcube webmail Filter \u2014 RSpamd for spam filtering SSL \u2014 Certificate generation and management Database \u2014 MySQL for user and configuration data Redis \u2014 Caching and session storage Unbound \u2014 DNS resolver for the filter service Fetchmail \u2014 External mail retrieval (optional) See Service architecture reference for a concise list and About the service architecture for context.","title":"Service architecture"},{"location":"#getting-help","text":"GitHub Issues \u2014 Report bugs and request features Releases \u2014 View release notes and changelog","title":"Getting help"},{"location":"#container-images","text":"Container images are available at: GitHub Container Registry Docker Hub","title":"Container images"},{"location":"#component-references","text":"Dovecot Documentation Postfix Documentation Rspamd Documentation Roundcube Documentation Redis Documentation Unbound Documentation","title":"Component references"},{"location":"#star-history","text":"","title":"Star history"},{"location":"installation/","text":"Installation For a step-by-step learning path, see the Tutorial: Getting Started . For task-oriented installation: How to install with Docker Compose \u2014 Docker installation How to install on Kubernetes \u2014 Kubernetes deployment For ports and post-installation steps, see Ports reference and the post-installation sections in the how-to guides.","title":"Installation"},{"location":"installation/#installation","text":"For a step-by-step learning path, see the Tutorial: Getting Started . For task-oriented installation: How to install with Docker Compose \u2014 Docker installation How to install on Kubernetes \u2014 Kubernetes deployment For ports and post-installation steps, see Ports reference and the post-installation sections in the how-to guides.","title":"Installation"},{"location":"upgrade/","text":"Upgrade See How to upgrade for upgrade steps and Upgrade changelog for version-specific notes.","title":"Upgrade"},{"location":"upgrade/#upgrade","text":"See How to upgrade for upgrade steps and Upgrade changelog for version-specific notes.","title":"Upgrade"},{"location":"administration/dashboard/","text":"Dashboard The dashboard is the main page after login. It shows an overview of the mailserver: domains, users, and quick links to common tasks. From the dashboard you can navigate to domain, user, alias, fetchmail, and DKIM management, and to the DNS Validation Wizard and observability dashboards when available.","title":"Dashboard"},{"location":"administration/dashboard/#dashboard","text":"The dashboard is the main page after login. It shows an overview of the mailserver: domains, users, and quick links to common tasks. From the dashboard you can navigate to domain, user, alias, fetchmail, and DKIM management, and to the DNS Validation Wizard and observability dashboards when available.","title":"Dashboard"},{"location":"administration/dkim-signing/","text":"DKIM Signing See How to configure DKIM signing for configuration steps. For DNS record format, see DNS records reference .","title":"DKIM Signing"},{"location":"administration/dkim-signing/#dkim-signing","text":"See How to configure DKIM signing for configuration steps. For DNS record format, see DNS records reference .","title":"DKIM Signing"},{"location":"administration/dns-validation-wizard/","text":"DNS Validation Wizard See How to validate DNS with the wizard for usage. For required DNS records, see DNS records reference and How to configure DNS .","title":"DNS Validation Wizard"},{"location":"administration/dns-validation-wizard/#dns-validation-wizard","text":"See How to validate DNS with the wizard for usage. For required DNS records, see DNS records reference and How to configure DNS .","title":"DNS Validation Wizard"},{"location":"administration/ios-macos-profile/","text":"iOS / macOS Profile See How to use the iOS / macOS Mail profile for usage and Apple documentation links.","title":"iOS / macOS Profile"},{"location":"administration/ios-macos-profile/#ios-macos-profile","text":"See How to use the iOS / macOS Mail profile for usage and Apple documentation links.","title":"iOS / macOS Profile"},{"location":"administration/login/","text":"Login The login page authenticates users to the mailserver-admin interface. Authentication methods are local (email + password) or OAuth2, depending on configuration. Authentication methods Local authentication By default, users log in with their mailserver email address and password. OAuth2 When OAuth2 is enabled, an OAuth2 login button is shown. Users can sign in via an external identity provider. OAuth2 is typically used to grant admin rights based on group membership. For setup, see How to configure OAuth2 . For OAuth2 variables, see mailserver-admin configuration reference .","title":"Login"},{"location":"administration/login/#login","text":"The login page authenticates users to the mailserver-admin interface. Authentication methods are local (email + password) or OAuth2, depending on configuration.","title":"Login"},{"location":"administration/login/#authentication-methods","text":"","title":"Authentication methods"},{"location":"administration/login/#local-authentication","text":"By default, users log in with their mailserver email address and password.","title":"Local authentication"},{"location":"administration/login/#oauth2","text":"When OAuth2 is enabled, an OAuth2 login button is shown. Users can sign in via an external identity provider. OAuth2 is typically used to grant admin rights based on group membership. For setup, see How to configure OAuth2 . For OAuth2 variables, see mailserver-admin configuration reference .","title":"OAuth2"},{"location":"administration/manage-aliases/","text":"Manage Aliases See How to manage aliases for step-by-step instructions. For access control, see User roles reference .","title":"Manage Aliases"},{"location":"administration/manage-aliases/#manage-aliases","text":"See How to manage aliases for step-by-step instructions. For access control, see User roles reference .","title":"Manage Aliases"},{"location":"administration/manage-domains/","text":"Manage Domains See How to manage domains for step-by-step instructions. For access control, see User roles reference .","title":"Manage Domains"},{"location":"administration/manage-domains/#manage-domains","text":"See How to manage domains for step-by-step instructions. For access control, see User roles reference .","title":"Manage Domains"},{"location":"administration/manage-fetchmail/","text":"Manage Fetchmail See How to manage fetchmail accounts for step-by-step instructions. For access control, see User roles reference .","title":"Manage Fetchmail"},{"location":"administration/manage-fetchmail/#manage-fetchmail","text":"See How to manage fetchmail accounts for step-by-step instructions. For access control, see User roles reference .","title":"Manage Fetchmail"},{"location":"administration/manage-users/","text":"Manage Users See How to manage users for step-by-step instructions. For user properties and access control, see User roles reference .","title":"Manage Users"},{"location":"administration/manage-users/#manage-users","text":"See How to manage users for step-by-step instructions. For user properties and access control, see User roles reference .","title":"Manage Users"},{"location":"administration/user-roles/","text":"User Roles See User roles reference for permissions and capabilities of Admin, Domain Admin, and User roles.","title":"User Roles"},{"location":"administration/user-roles/#user-roles","text":"See User roles reference for permissions and capabilities of Admin, Domain Admin, and User roles.","title":"User Roles"},{"location":"configuration/dns-configuration/","text":"DNS Configuration DNS records reference \u2014 Record types, formats, and examples (MX, SPF, DKIM, DMARC) How to configure DNS for your domain \u2014 Step-by-step configuration About DNS and email delivery \u2014 Why MX, SPF, DKIM, and DMARC matter","title":"DNS Configuration"},{"location":"configuration/dns-configuration/#dns-configuration","text":"DNS records reference \u2014 Record types, formats, and examples (MX, SPF, DKIM, DMARC) How to configure DNS for your domain \u2014 Step-by-step configuration About DNS and email delivery \u2014 Why MX, SPF, DKIM, and DMARC matter","title":"DNS Configuration"},{"location":"configuration/environment-variables/","text":"Environment Variables Configuration See Environment variables reference for the full list of environment variables and their descriptions.","title":"Environment Variables Configuration"},{"location":"configuration/environment-variables/#environment-variables-configuration","text":"See Environment variables reference for the full list of environment variables and their descriptions.","title":"Environment Variables Configuration"},{"location":"configuration/external-mysql/","text":"External MySQL Configuration See How to use an external MySQL database for setup steps. For variable reference, see Environment variables reference (Database section).","title":"External MySQL Configuration"},{"location":"configuration/external-mysql/#external-mysql-configuration","text":"See How to use an external MySQL database for setup steps. For variable reference, see Environment variables reference (Database section).","title":"External MySQL Configuration"},{"location":"configuration/local-address-extension/","text":"Local Address Extension See Local address extension reference for configuration and Sieve usage.","title":"Local Address Extension"},{"location":"configuration/local-address-extension/#local-address-extension","text":"See Local address extension reference for configuration and Sieve usage.","title":"Local Address Extension"},{"location":"configuration/mailserver-admin/","text":"mailserver-admin Configuration See mailserver-admin configuration reference for environment variables. For OAuth2 setup, see How to configure OAuth2 .","title":"mailserver-admin Configuration"},{"location":"configuration/mailserver-admin/#mailserver-admin-configuration","text":"See mailserver-admin configuration reference for environment variables. For OAuth2 setup, see How to configure OAuth2 .","title":"mailserver-admin Configuration"},{"location":"configuration/php-sessions/","text":"PHP Session Configuration See How to configure PHP sessions for Redis and file-based session configuration. For variable reference, see Environment variables reference (PHP Sessions section).","title":"PHP Session Configuration"},{"location":"configuration/php-sessions/#php-session-configuration","text":"See How to configure PHP sessions for Redis and file-based session configuration. For variable reference, see Environment variables reference (PHP Sessions section).","title":"PHP Session Configuration"},{"location":"configuration/relayhost/","text":"Relayhost Configuration See How to configure a relay host for step-by-step configuration. For variable reference, see Environment variables reference (Relay section).","title":"Relayhost Configuration"},{"location":"configuration/relayhost/#relayhost-configuration","text":"See How to configure a relay host for step-by-step configuration. For variable reference, see Environment variables reference (Relay section).","title":"Relayhost Configuration"},{"location":"configuration/reverse-proxy/","text":"Reverse Proxy Configuration See How to configure a reverse proxy (Traefik) for PROXY protocol and internal address configuration. For variable reference, see Environment variables reference (Proxy Protocol and Service Addresses).","title":"Reverse Proxy Configuration"},{"location":"configuration/reverse-proxy/#reverse-proxy-configuration","text":"See How to configure a reverse proxy (Traefik) for PROXY protocol and internal address configuration. For variable reference, see Environment variables reference (Proxy Protocol and Service Addresses).","title":"Reverse Proxy Configuration"},{"location":"configuration/roundcube/","text":"Roundcube Configuration See How to add Roundcube plugins for installing plugins via the RC_PLUGINS build argument.","title":"Roundcube Configuration"},{"location":"configuration/roundcube/#roundcube-configuration","text":"See How to add Roundcube plugins for installing plugins via the RC_PLUGINS build argument.","title":"Roundcube Configuration"},{"location":"configuration/tls/","text":"TLS Certificate Configuration See How to configure TLS certificates for using external certificates (e.g. Let's Encrypt) with the MTA and MDA.","title":"TLS Certificate Configuration"},{"location":"configuration/tls/#tls-certificate-configuration","text":"See How to configure TLS certificates for using external certificates (e.g. Let's Encrypt) with the MTA and MDA.","title":"TLS Certificate Configuration"},{"location":"development/architecture/","text":"Service Architecture Service architecture reference \u2014 List of services and persistent volumes About the service architecture \u2014 How the services work together and why the system is structured this way","title":"Service Architecture"},{"location":"development/architecture/#service-architecture","text":"Service architecture reference \u2014 List of services and persistent volumes About the service architecture \u2014 How the services work together and why the system is structured this way","title":"Service Architecture"},{"location":"development/development/","text":"Developer Guide This document provides essential information for developers working on the docker-mailserver project. Development Commands The following Make commands are essential for the development workflow: make clean Cleans the development environment by: Stopping and removing all running containers Removing all Docker volumes (data-db, data-mail, data-tls, data-filter, data-redis) Removing all built Docker images Cleaning up any temporary files Usage: make clean When to use: Before starting fresh development work When switching between different configurations To free up disk space from accumulated Docker data To have a fresh database When encountering persistent issues that might be related to cached data make up Builds and starts all mailserver services in development mode: Builds all Docker images from source Waits for services to be ready Exposes services on local ports for testing Usage: make up What it does: Builds MTA, MDA, Web, Filter, SSL, and other service images Configures service networking and dependencies Makes services available for testing and development When to use: After making code changes to any service When setting up a new development environment After running make clean to rebuild everything make test Runs the complete integration test suite against the running mailserver: Executes fixtures to populate the database Executes BATS (Bash Automated Testing System) tests Tests all major mailserver functionality Validates TLS/SSL configuration Tests database connectivity and user management Verifies MTA, MDA, and web service functionality Tests DKIM signing and spam filtering Validates fetchmail and DNS resolution Usage: make test Prerequisites: Services must be running (run make up first) All services must be healthy and ready Test Coverage: TLS certificate generation and validation Database initialization and connectivity Configuration file generation MTA (Postfix) functionality Web interface accessibility MDA (Dovecot) IMAP/POP3 services Docker container health checks Relay host configuration DKIM signing and verification Fetchmail external mail retrieval Unbound DNS resolution make lint Lints all files in the project to ensure code quality and consistency: Checks shell scripts for syntax errors and best practices Validates YAML files for proper formatting Ensures Dockerfiles follow best practices Checks configuration files for syntax issues Validates documentation formatting Usage: make lint What it checks: Shell scripts ( .sh files) using shellcheck YAML files ( .yml , .yaml ) for syntax and formatting Dockerfiles for best practices and security issues Configuration files for proper syntax Documentation files for formatting consistency When to use: Before committing changes to ensure code quality As part of the development workflow To catch syntax errors and style issues early To maintain consistent code formatting across the project Development Workflow The typical development workflow is: Clean environment: make clean Build and start services: make build up Run tests: make test Make changes to code and repeat steps 2-3 as needed Lint your changes before committing: make lint Testing Specific Changes When making changes to a specific service (e.g., MDA, MTA, Web, Filter), you can test your changes more efficiently: Example: Testing MDA Service Changes Make your changes to the MDA service (e.g., modify target/mda/Dockerfile or configuration files) Rebuild and restart services: make build up This will rebuild the changed service and restart all services. Run a specific test to verify your changes: ./bin/test.sh run --rm test bats 070_docker.bats This runs only the Docker-related tests instead of the full test suite. Additional Development Commands View logs: bin/test.sh logs -f [service-name] Access service shell: bin/test.sh exec [service-name] sh Check service status: bin/test.sh ps Restart specific service: bin/test.sh restart [service-name] Troubleshooting Development Issues Services won't start: Run make clean then make up Tests failing: Ensure all services are healthy with bin/test.sh ps Build issues: Check Docker daemon is running and has sufficient resources Port conflicts: Ensure ports 25, 143, 587, 993, 995, 80, 81 are available Project Structure The project is organized into several key directories: target/ - Contains Dockerfiles and configuration for each service test/ - Integration tests using BATS docs/ - Documentation and example configurations deploy/ - Kubernetes and Compose deployment configurations bin/ - Utility scripts for development and deployment Contributing When contributing to the project: Follow the development workflow above Ensure all tests pass before submitting changes Update documentation as needed Test your changes in both Docker Compose and Kubernetes environments Follow the existing code style and patterns","title":"Development guide"},{"location":"development/development/#developer-guide","text":"This document provides essential information for developers working on the docker-mailserver project.","title":"Developer Guide"},{"location":"development/development/#development-commands","text":"The following Make commands are essential for the development workflow:","title":"Development Commands"},{"location":"development/development/#make-clean","text":"Cleans the development environment by: Stopping and removing all running containers Removing all Docker volumes (data-db, data-mail, data-tls, data-filter, data-redis) Removing all built Docker images Cleaning up any temporary files Usage: make clean When to use: Before starting fresh development work When switching between different configurations To free up disk space from accumulated Docker data To have a fresh database When encountering persistent issues that might be related to cached data","title":"make clean"},{"location":"development/development/#make-up","text":"Builds and starts all mailserver services in development mode: Builds all Docker images from source Waits for services to be ready Exposes services on local ports for testing Usage: make up What it does: Builds MTA, MDA, Web, Filter, SSL, and other service images Configures service networking and dependencies Makes services available for testing and development When to use: After making code changes to any service When setting up a new development environment After running make clean to rebuild everything","title":"make up"},{"location":"development/development/#make-test","text":"Runs the complete integration test suite against the running mailserver: Executes fixtures to populate the database Executes BATS (Bash Automated Testing System) tests Tests all major mailserver functionality Validates TLS/SSL configuration Tests database connectivity and user management Verifies MTA, MDA, and web service functionality Tests DKIM signing and spam filtering Validates fetchmail and DNS resolution Usage: make test Prerequisites: Services must be running (run make up first) All services must be healthy and ready Test Coverage: TLS certificate generation and validation Database initialization and connectivity Configuration file generation MTA (Postfix) functionality Web interface accessibility MDA (Dovecot) IMAP/POP3 services Docker container health checks Relay host configuration DKIM signing and verification Fetchmail external mail retrieval Unbound DNS resolution","title":"make test"},{"location":"development/development/#make-lint","text":"Lints all files in the project to ensure code quality and consistency: Checks shell scripts for syntax errors and best practices Validates YAML files for proper formatting Ensures Dockerfiles follow best practices Checks configuration files for syntax issues Validates documentation formatting Usage: make lint What it checks: Shell scripts ( .sh files) using shellcheck YAML files ( .yml , .yaml ) for syntax and formatting Dockerfiles for best practices and security issues Configuration files for proper syntax Documentation files for formatting consistency When to use: Before committing changes to ensure code quality As part of the development workflow To catch syntax errors and style issues early To maintain consistent code formatting across the project","title":"make lint"},{"location":"development/development/#development-workflow","text":"The typical development workflow is: Clean environment: make clean Build and start services: make build up Run tests: make test Make changes to code and repeat steps 2-3 as needed Lint your changes before committing: make lint","title":"Development Workflow"},{"location":"development/development/#testing-specific-changes","text":"When making changes to a specific service (e.g., MDA, MTA, Web, Filter), you can test your changes more efficiently:","title":"Testing Specific Changes"},{"location":"development/development/#example-testing-mda-service-changes","text":"Make your changes to the MDA service (e.g., modify target/mda/Dockerfile or configuration files) Rebuild and restart services: make build up This will rebuild the changed service and restart all services. Run a specific test to verify your changes: ./bin/test.sh run --rm test bats 070_docker.bats This runs only the Docker-related tests instead of the full test suite.","title":"Example: Testing MDA Service Changes"},{"location":"development/development/#additional-development-commands","text":"View logs: bin/test.sh logs -f [service-name] Access service shell: bin/test.sh exec [service-name] sh Check service status: bin/test.sh ps Restart specific service: bin/test.sh restart [service-name]","title":"Additional Development Commands"},{"location":"development/development/#troubleshooting-development-issues","text":"Services won't start: Run make clean then make up Tests failing: Ensure all services are healthy with bin/test.sh ps Build issues: Check Docker daemon is running and has sufficient resources Port conflicts: Ensure ports 25, 143, 587, 993, 995, 80, 81 are available","title":"Troubleshooting Development Issues"},{"location":"development/development/#project-structure","text":"The project is organized into several key directories: target/ - Contains Dockerfiles and configuration for each service test/ - Integration tests using BATS docs/ - Documentation and example configurations deploy/ - Kubernetes and Compose deployment configurations bin/ - Utility scripts for development and deployment","title":"Project Structure"},{"location":"development/development/#contributing","text":"When contributing to the project: Follow the development workflow above Ensure all tests pass before submitting changes Update documentation as needed Test your changes in both Docker Compose and Kubernetes environments Follow the existing code style and patterns","title":"Contributing"},{"location":"development/mailserver-admin/","text":"Development Guide for mailserver-admin This document describes the development setup and workflow for the mailserver-admin project. The project is located in a separate repository: mailserver-admin . Technical Stack PHP Symfony EasyAdmin MySQL Redis PHPUnit Development Environment Setup The project uses devenv to provide a reproducible development environment with all necessary services and dependencies. Prerequisites Nix installed on your system devenv installed Initial Setup Clone the repository: git clone <repository-url> cd mailserver-admin Start the development environment: devenv up This command will: Set up PHP 8.4 with required extensions (Redis, PDO MySQL, Xdebug) Start MySQL database server Start Redis server Start Caddy web server on port 8000 Configure PHP-FPM pool for the web server Set up environment variables for database and Redis connections Install dependencies: composer install Starting the Web Server Important : You must run devenv up to start the web server. This command starts all required services: Caddy web server on http://localhost:8000 MySQL database (accessible at 127.0.0.1 ) Redis server (accessible at localhost:6379 ) The web server is configured to serve files from the public/ directory and uses PHP-FPM for PHP execution. Development Commands The project includes several composer scripts for development tasks: Code Style Fixing Fix code style issues using PHP CS Fixer: composer run csfix This command runs PHP CS Fixer with the configuration defined in .php-cs-fixer.dist.php . It applies PSR-2, Symfony, and PHP 8.0 migration rules to the following directories: bin/ public/ tests/ src/ migrations/ Static Analysis Run PHPStan to perform static analysis: composer run phpstan PHPStan is configured to analyze code at level 6 (as defined in phpstan.dist.neon ) and checks the following directories: bin/ config/ public/ src/ tests/ Running Tests Execute the test suite: composer run test This runs PHPUnit with the configuration from phpunit.dist.xml . The test suite includes the following: Unit tests in tests/Unit/ Integration tests in tests/Integration/ Tests run in the test environment and use the database configured in .env.test . Code Refactoring Run Rector to automatically refactor code: composer run rector Rector uses the configuration from rector.php to apply automated code improvements and migrations. Project Structure src/ : Application source code tests/ : Test files (Unit and Integration) config/ : Symfony configuration files public/ : Web server document root migrations/ : Database migration files templates/ : Twig templates bin/ : Executable scripts (console, phpunit) Development Workflow Start the environment : devenv up Make your changes in the appropriate directories Fix code style : composer run csfix Check static analysis : composer run phpstan Run tests : composer run test Commit your changes following the project's commit message conventions Debugging Xdebug is configured in the devenv setup with the following settings: Mode: debug Client port: 9003 Start with request: enabled Configure your IDE to connect to Xdebug on port 9003 for debugging. Database Migrations When making database schema changes: Create a migration: php bin/console doctrine:migrations:generate Edit the generated migration file in migrations/ Run migrations: php bin/console doctrine:migrations:migrate Additional Resources Symfony Documentation EasyAdmin Bundle Documentation devenv Documentation PHP CS Fixer Documentation PHPStan Documentation","title":"mailserver-admin development"},{"location":"development/mailserver-admin/#development-guide-for-mailserver-admin","text":"This document describes the development setup and workflow for the mailserver-admin project. The project is located in a separate repository: mailserver-admin .","title":"Development Guide for mailserver-admin"},{"location":"development/mailserver-admin/#technical-stack","text":"PHP Symfony EasyAdmin MySQL Redis PHPUnit","title":"Technical Stack"},{"location":"development/mailserver-admin/#development-environment-setup","text":"The project uses devenv to provide a reproducible development environment with all necessary services and dependencies.","title":"Development Environment Setup"},{"location":"development/mailserver-admin/#prerequisites","text":"Nix installed on your system devenv installed","title":"Prerequisites"},{"location":"development/mailserver-admin/#initial-setup","text":"Clone the repository: git clone <repository-url> cd mailserver-admin Start the development environment: devenv up This command will: Set up PHP 8.4 with required extensions (Redis, PDO MySQL, Xdebug) Start MySQL database server Start Redis server Start Caddy web server on port 8000 Configure PHP-FPM pool for the web server Set up environment variables for database and Redis connections Install dependencies: composer install","title":"Initial Setup"},{"location":"development/mailserver-admin/#starting-the-web-server","text":"Important : You must run devenv up to start the web server. This command starts all required services: Caddy web server on http://localhost:8000 MySQL database (accessible at 127.0.0.1 ) Redis server (accessible at localhost:6379 ) The web server is configured to serve files from the public/ directory and uses PHP-FPM for PHP execution.","title":"Starting the Web Server"},{"location":"development/mailserver-admin/#development-commands","text":"The project includes several composer scripts for development tasks:","title":"Development Commands"},{"location":"development/mailserver-admin/#code-style-fixing","text":"Fix code style issues using PHP CS Fixer: composer run csfix This command runs PHP CS Fixer with the configuration defined in .php-cs-fixer.dist.php . It applies PSR-2, Symfony, and PHP 8.0 migration rules to the following directories: bin/ public/ tests/ src/ migrations/","title":"Code Style Fixing"},{"location":"development/mailserver-admin/#static-analysis","text":"Run PHPStan to perform static analysis: composer run phpstan PHPStan is configured to analyze code at level 6 (as defined in phpstan.dist.neon ) and checks the following directories: bin/ config/ public/ src/ tests/","title":"Static Analysis"},{"location":"development/mailserver-admin/#running-tests","text":"Execute the test suite: composer run test This runs PHPUnit with the configuration from phpunit.dist.xml . The test suite includes the following: Unit tests in tests/Unit/ Integration tests in tests/Integration/ Tests run in the test environment and use the database configured in .env.test .","title":"Running Tests"},{"location":"development/mailserver-admin/#code-refactoring","text":"Run Rector to automatically refactor code: composer run rector Rector uses the configuration from rector.php to apply automated code improvements and migrations.","title":"Code Refactoring"},{"location":"development/mailserver-admin/#project-structure","text":"src/ : Application source code tests/ : Test files (Unit and Integration) config/ : Symfony configuration files public/ : Web server document root migrations/ : Database migration files templates/ : Twig templates bin/ : Executable scripts (console, phpunit)","title":"Project Structure"},{"location":"development/mailserver-admin/#development-workflow","text":"Start the environment : devenv up Make your changes in the appropriate directories Fix code style : composer run csfix Check static analysis : composer run phpstan Run tests : composer run test Commit your changes following the project's commit message conventions","title":"Development Workflow"},{"location":"development/mailserver-admin/#debugging","text":"Xdebug is configured in the devenv setup with the following settings: Mode: debug Client port: 9003 Start with request: enabled Configure your IDE to connect to Xdebug on port 9003 for debugging.","title":"Debugging"},{"location":"development/mailserver-admin/#database-migrations","text":"When making database schema changes: Create a migration: php bin/console doctrine:migrations:generate Edit the generated migration file in migrations/ Run migrations: php bin/console doctrine:migrations:migrate","title":"Database Migrations"},{"location":"development/mailserver-admin/#additional-resources","text":"Symfony Documentation EasyAdmin Bundle Documentation devenv Documentation PHP CS Fixer Documentation PHPStan Documentation","title":"Additional Resources"},{"location":"explanation/architecture/","text":"About the Service Architecture docker-mailserver is built from several services that handle different parts of mail delivery and management. Understanding how they fit together helps when configuring, troubleshooting, or extending the system. Why multiple services Email delivery involves distinct tasks: accepting and relaying mail (MTA), storing and serving mailboxes (MDA), filtering spam (filter), and providing a web UI (web). Splitting these into separate services lets each use the right technology (Postfix, Dovecot, Rspamd, PHP) and scale or replace components independently. How the services work together MTA (Postfix) receives mail on port 25 and accepts submissions on port 587. It looks up recipients in the database, applies relay and policy, and hands mail to the filter for scanning. After filtering, it delivers to the MDA via LMTP or stores in the queue for later delivery. MDA (Dovecot) stores mail in maildirs and serves it over IMAP and POP3. It authenticates users against the database and enforces quotas. The web interface uses Dovecot for authentication and mailbox access; the filter may use Dovecot for scanning. Filter (Rspamd) scans messages for spam and viruses, applies DKIM signing, and can learn from user actions (e.g. moving mail to junk). It runs as a milter so the MTA can pass messages through it before delivery. Web runs the admin UI (mailserver-admin) and Roundcube webmail. It talks to the database for users, domains, aliases, and DKIM, and to Dovecot for authentication and mailbox operations. Observability features pull data from Rspamd and Dovecot (e.g. Doveadm HTTP API). Database (MySQL) holds users, domains, aliases, DKIM config, and application data. All services that need this data connect to the same database. Redis is used for sessions and caching so the web service can run across multiple instances without losing session state. Unbound (when used) provides DNS resolution for the filter so RBL and other DNS-based checks work correctly. SSL (optional) generates and manages internal TLS certificates. In production you typically replace these with certificates from a CA (e.g. Let\u2019s Encrypt). Fetchmail (optional) periodically connects to external mail servers (POP3/IMAP) and delivers retrieved mail into local mailboxes. For a concise list of services and volumes, see Service architecture reference .","title":"Service architecture"},{"location":"explanation/architecture/#about-the-service-architecture","text":"docker-mailserver is built from several services that handle different parts of mail delivery and management. Understanding how they fit together helps when configuring, troubleshooting, or extending the system.","title":"About the Service Architecture"},{"location":"explanation/architecture/#why-multiple-services","text":"Email delivery involves distinct tasks: accepting and relaying mail (MTA), storing and serving mailboxes (MDA), filtering spam (filter), and providing a web UI (web). Splitting these into separate services lets each use the right technology (Postfix, Dovecot, Rspamd, PHP) and scale or replace components independently.","title":"Why multiple services"},{"location":"explanation/architecture/#how-the-services-work-together","text":"MTA (Postfix) receives mail on port 25 and accepts submissions on port 587. It looks up recipients in the database, applies relay and policy, and hands mail to the filter for scanning. After filtering, it delivers to the MDA via LMTP or stores in the queue for later delivery. MDA (Dovecot) stores mail in maildirs and serves it over IMAP and POP3. It authenticates users against the database and enforces quotas. The web interface uses Dovecot for authentication and mailbox access; the filter may use Dovecot for scanning. Filter (Rspamd) scans messages for spam and viruses, applies DKIM signing, and can learn from user actions (e.g. moving mail to junk). It runs as a milter so the MTA can pass messages through it before delivery. Web runs the admin UI (mailserver-admin) and Roundcube webmail. It talks to the database for users, domains, aliases, and DKIM, and to Dovecot for authentication and mailbox operations. Observability features pull data from Rspamd and Dovecot (e.g. Doveadm HTTP API). Database (MySQL) holds users, domains, aliases, DKIM config, and application data. All services that need this data connect to the same database. Redis is used for sessions and caching so the web service can run across multiple instances without losing session state. Unbound (when used) provides DNS resolution for the filter so RBL and other DNS-based checks work correctly. SSL (optional) generates and manages internal TLS certificates. In production you typically replace these with certificates from a CA (e.g. Let\u2019s Encrypt). Fetchmail (optional) periodically connects to external mail servers (POP3/IMAP) and delivers retrieved mail into local mailboxes. For a concise list of services and volumes, see Service architecture reference .","title":"How the services work together"},{"location":"explanation/dns-and-email/","text":"About DNS and Email Delivery DNS records tell the rest of the internet how to reach your mailserver and whether to trust mail from it. Correct DNS is required for reliable delivery and for authentication (SPF, DKIM, DMARC). Why MX matters The MX (Mail Exchange) record says which host accepts mail for your domain. When someone sends to user@example.com , the sender\u2019s server looks up MX for example.com . Without a correct MX record pointing to your mailserver, other servers will not deliver mail to you or may deliver to the wrong host. Why SPF matters SPF (Sender Policy Framework) lists which servers are allowed to send mail for your domain. Receiving servers check SPF to reduce spoofing: if mail claims to be from your domain but comes from an IP not in your SPF record, it can be marked as suspicious or rejected. Without SPF, your domain is easier to spoof and more likely to be treated as untrusted. Why DKIM matters DKIM (DomainKeys Identified Mail) lets receiving servers verify that mail was signed by a server that holds the private key for your domain. The public key is in DNS. Signing all outgoing mail and publishing the key improves deliverability and helps receivers distinguish legitimate mail from forgeries. Many providers and filters use DKIM as a signal for reputation and filtering. Why DMARC matters DMARC (Domain-based Message Authentication, Reporting and Conformance) tells receivers what to do with mail that fails SPF or DKIM (quarantine, reject) and where to send reports. It ties SPF and DKIM together and gives you visibility into authentication failures. Starting with a monitoring policy ( p=none ) and then tightening to quarantine or reject is a common approach. How they fit together MX gets mail to your server. SPF and DKIM help other servers trust mail from your server and reject or down-rank spoofed mail. DMARC defines policy and reporting so you can improve authentication over time. For record types and formats, see DNS records reference . For step-by-step configuration, see How to configure DNS for your domain .","title":"DNS and email delivery"},{"location":"explanation/dns-and-email/#about-dns-and-email-delivery","text":"DNS records tell the rest of the internet how to reach your mailserver and whether to trust mail from it. Correct DNS is required for reliable delivery and for authentication (SPF, DKIM, DMARC).","title":"About DNS and Email Delivery"},{"location":"explanation/dns-and-email/#why-mx-matters","text":"The MX (Mail Exchange) record says which host accepts mail for your domain. When someone sends to user@example.com , the sender\u2019s server looks up MX for example.com . Without a correct MX record pointing to your mailserver, other servers will not deliver mail to you or may deliver to the wrong host.","title":"Why MX matters"},{"location":"explanation/dns-and-email/#why-spf-matters","text":"SPF (Sender Policy Framework) lists which servers are allowed to send mail for your domain. Receiving servers check SPF to reduce spoofing: if mail claims to be from your domain but comes from an IP not in your SPF record, it can be marked as suspicious or rejected. Without SPF, your domain is easier to spoof and more likely to be treated as untrusted.","title":"Why SPF matters"},{"location":"explanation/dns-and-email/#why-dkim-matters","text":"DKIM (DomainKeys Identified Mail) lets receiving servers verify that mail was signed by a server that holds the private key for your domain. The public key is in DNS. Signing all outgoing mail and publishing the key improves deliverability and helps receivers distinguish legitimate mail from forgeries. Many providers and filters use DKIM as a signal for reputation and filtering.","title":"Why DKIM matters"},{"location":"explanation/dns-and-email/#why-dmarc-matters","text":"DMARC (Domain-based Message Authentication, Reporting and Conformance) tells receivers what to do with mail that fails SPF or DKIM (quarantine, reject) and where to send reports. It ties SPF and DKIM together and gives you visibility into authentication failures. Starting with a monitoring policy ( p=none ) and then tightening to quarantine or reject is a common approach.","title":"Why DMARC matters"},{"location":"explanation/dns-and-email/#how-they-fit-together","text":"MX gets mail to your server. SPF and DKIM help other servers trust mail from your server and reject or down-rank spoofed mail. DMARC defines policy and reporting so you can improve authentication over time. For record types and formats, see DNS records reference . For step-by-step configuration, see How to configure DNS for your domain .","title":"How they fit together"},{"location":"explanation/observability/","text":"About Observability Observability is the ability to infer a system\u2019s internal state from its external outputs. For a mailserver, that means using metrics and dashboards to see how mail and authentication are behaving without logging into each component. mailserver-admin provides observability by aggregating data from the Rspamd filter and the Dovecot MDA and presenting it in web-based dashboards. This gives operators a single place to check service health, message throughput, spam filtering results, and authentication patterns. What the dashboards show Rspamd Statistics: Health of the Rspamd controller, message counts (scanned, spam, ham, etc.), throughput over time, action distribution (reject, greylist, clean, etc.), and configuration details such as thresholds and top symbols. This helps you see how much mail is being processed and how the filter is behaving. Dovecot Statistics: Connection to the Dovecot API (Doveadm HTTP), authentication successes and failures, index operations, authentication rate over time, and mail delivery rate over time. This helps you spot authentication issues or unusual delivery patterns. Data is collected from consecutive samples; rates are computed as deltas between measurements. The dashboards support different time ranges (day, week, month, year) for throughput and rate charts. Why it matters With observability you can: Confirm that Rspamd and Dovecot are reachable and responding. See whether message volume or filter actions have changed. Identify spikes in authentication failures that might indicate abuse or misconfiguration. Correlate delivery rates with changes in configuration or infrastructure. For this to work, the web service must be able to reach the Rspamd controller and the Dovecot Doveadm HTTP API. The required environment variables (e.g. MDA_DOVEADM_ADDRESS , DOVEADM_API_KEY ) are described in the Upgrade changelog (v7.3) and Environment variables reference . Change at least DOVEADM_API_KEY from the default in production.","title":"Observability"},{"location":"explanation/observability/#about-observability","text":"Observability is the ability to infer a system\u2019s internal state from its external outputs. For a mailserver, that means using metrics and dashboards to see how mail and authentication are behaving without logging into each component. mailserver-admin provides observability by aggregating data from the Rspamd filter and the Dovecot MDA and presenting it in web-based dashboards. This gives operators a single place to check service health, message throughput, spam filtering results, and authentication patterns.","title":"About Observability"},{"location":"explanation/observability/#what-the-dashboards-show","text":"Rspamd Statistics: Health of the Rspamd controller, message counts (scanned, spam, ham, etc.), throughput over time, action distribution (reject, greylist, clean, etc.), and configuration details such as thresholds and top symbols. This helps you see how much mail is being processed and how the filter is behaving. Dovecot Statistics: Connection to the Dovecot API (Doveadm HTTP), authentication successes and failures, index operations, authentication rate over time, and mail delivery rate over time. This helps you spot authentication issues or unusual delivery patterns. Data is collected from consecutive samples; rates are computed as deltas between measurements. The dashboards support different time ranges (day, week, month, year) for throughput and rate charts.","title":"What the dashboards show"},{"location":"explanation/observability/#why-it-matters","text":"With observability you can: Confirm that Rspamd and Dovecot are reachable and responding. See whether message volume or filter actions have changed. Identify spikes in authentication failures that might indicate abuse or misconfiguration. Correlate delivery rates with changes in configuration or infrastructure. For this to work, the web service must be able to reach the Rspamd controller and the Dovecot Doveadm HTTP API. The required environment variables (e.g. MDA_DOVEADM_ADDRESS , DOVEADM_API_KEY ) are described in the Upgrade changelog (v7.3) and Environment variables reference . Change at least DOVEADM_API_KEY from the default in production.","title":"Why it matters"},{"location":"how-to/configure-dkim/","text":"How to Configure DKIM Signing DKIM (DomainKeys Identified Mail) signs outgoing mail so receiving servers can verify authenticity. Configure it per domain in the management interface. Steps Log in to the management interface. Open DKIM in the menu. Select the domain. Generate the private key (if not already done). Add the displayed DNS TXT record to your domain\u2019s DNS. See DNS records reference for DKIM format. In the management interface, verify the DNS record (e.g. via the DNS Validation Wizard). Enable DKIM signing for the domain. After this, outgoing mail for that domain is signed with the private key. Receiving servers verify using the public key in DNS. Implementation note Signing is done by the Rspamd DKIM module. Rspamd checks that the domain\u2019s DKIM DNS record is present and valid before signing. For record format and verification, see DNS records reference .","title":"Configure DKIM"},{"location":"how-to/configure-dkim/#how-to-configure-dkim-signing","text":"DKIM (DomainKeys Identified Mail) signs outgoing mail so receiving servers can verify authenticity. Configure it per domain in the management interface.","title":"How to Configure DKIM Signing"},{"location":"how-to/configure-dkim/#steps","text":"Log in to the management interface. Open DKIM in the menu. Select the domain. Generate the private key (if not already done). Add the displayed DNS TXT record to your domain\u2019s DNS. See DNS records reference for DKIM format. In the management interface, verify the DNS record (e.g. via the DNS Validation Wizard). Enable DKIM signing for the domain. After this, outgoing mail for that domain is signed with the private key. Receiving servers verify using the public key in DNS.","title":"Steps"},{"location":"how-to/configure-dkim/#implementation-note","text":"Signing is done by the Rspamd DKIM module. Rspamd checks that the domain\u2019s DKIM DNS record is present and valid before signing. For record format and verification, see DNS records reference .","title":"Implementation note"},{"location":"how-to/configure-dns/","text":"How to Configure DNS for Your Domain To receive and send mail reliably, configure DNS records for your domain. This guide gives practical steps; for record formats and options, see DNS records reference . Steps 1. Add MX record Create an MX record pointing to your mailserver hostname (the value of MAILNAME , e.g. mail.example.com ). Use priority 10 (or another value; lower = higher priority if you have multiple MX records). 2. Add A and AAAA records Create A (and optionally AAAA) records for the mailserver hostname so it resolves to your server\u2019s IP(s). 3. Add SPF record Add a TXT record at the domain root with your SPF policy, e.g. v=spf1 mx a ~all . Adjust mechanisms (e.g. ip4: , ip6: ) to match your sending IPs. Use ~all for testing and -all for production once stable. 4. Add DKIM record Configure DKIM in the management interface (see How to configure DKIM signing ). The interface shows the TXT record to add; publish it at the indicated name (e.g. default._domainkey.example.com ). 5. Add DMARC record (recommended) Add a TXT record at _dmarc with a DMARC policy. Start with p=none and rua=mailto:... for monitoring; move to p=quarantine or p=reject after you are satisfied with authentication. Verification Use the DNS Validation Wizard in the management interface. Use dig or nslookup to check MX, A, AAAA, and TXT records. DNS changes can take from minutes up to 48 hours to propagate. If validation fails right after adding records, wait for propagation and check again. For record formats and examples, see DNS records reference . For context on why these records matter, see DNS and email delivery .","title":"Configure DNS"},{"location":"how-to/configure-dns/#how-to-configure-dns-for-your-domain","text":"To receive and send mail reliably, configure DNS records for your domain. This guide gives practical steps; for record formats and options, see DNS records reference .","title":"How to Configure DNS for Your Domain"},{"location":"how-to/configure-dns/#steps","text":"","title":"Steps"},{"location":"how-to/configure-dns/#1-add-mx-record","text":"Create an MX record pointing to your mailserver hostname (the value of MAILNAME , e.g. mail.example.com ). Use priority 10 (or another value; lower = higher priority if you have multiple MX records).","title":"1. Add MX record"},{"location":"how-to/configure-dns/#2-add-a-and-aaaa-records","text":"Create A (and optionally AAAA) records for the mailserver hostname so it resolves to your server\u2019s IP(s).","title":"2. Add A and AAAA records"},{"location":"how-to/configure-dns/#3-add-spf-record","text":"Add a TXT record at the domain root with your SPF policy, e.g. v=spf1 mx a ~all . Adjust mechanisms (e.g. ip4: , ip6: ) to match your sending IPs. Use ~all for testing and -all for production once stable.","title":"3. Add SPF record"},{"location":"how-to/configure-dns/#4-add-dkim-record","text":"Configure DKIM in the management interface (see How to configure DKIM signing ). The interface shows the TXT record to add; publish it at the indicated name (e.g. default._domainkey.example.com ).","title":"4. Add DKIM record"},{"location":"how-to/configure-dns/#5-add-dmarc-record-recommended","text":"Add a TXT record at _dmarc with a DMARC policy. Start with p=none and rua=mailto:... for monitoring; move to p=quarantine or p=reject after you are satisfied with authentication.","title":"5. Add DMARC record (recommended)"},{"location":"how-to/configure-dns/#verification","text":"Use the DNS Validation Wizard in the management interface. Use dig or nslookup to check MX, A, AAAA, and TXT records. DNS changes can take from minutes up to 48 hours to propagate. If validation fails right after adding records, wait for propagation and check again. For record formats and examples, see DNS records reference . For context on why these records matter, see DNS and email delivery .","title":"Verification"},{"location":"how-to/configure-external-mysql/","text":"How to Use an External MySQL Database docker-mailserver can use an external MySQL (or compatible) database instead of the included database service. Use this for production, Kubernetes, or when reusing existing MySQL infrastructure. Steps 1. Create the database and user On the MySQL server: CREATE DATABASE mailserver CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ; Create a user with access to that database and set a password. 2. Import the schema Import the mailserver and webmail schema from the project: mysql -h your-mysql-host -u root -p mailserver < target/db/rootfs/docker-entrypoint-initdb.d/001_mailserver.sql mysql -h your-mysql-host -u root -p mailserver < target/db/rootfs/docker-entrypoint-initdb.d/002_webmail.sql Adjust host, user, and paths as needed. 3. Configure environment variables In .env : MYSQL_HOST = your-mysql-host.example.com MYSQL_DATABASE = mailserver MYSQL_USER = mailserver_user MYSQL_PASSWORD = your_secure_password 4. Remove or exclude the database service (Docker Compose) If using Docker Compose, remove or do not include the db service (e.g. comment out or omit deploy/compose/db.yaml ). Remove depends_on: db from services that referenced it so they use the external host instead. 5. Restart the web service Restart the web service so it connects to the external database and runs any migrations: Docker: bin/production.sh restart web or docker-compose restart web Kubernetes: kubectl rollout restart deployment/web -n mail Kubernetes Kustomize does not include a database service; you must provide an external MySQL (or compatible) database and set MYSQL_* in your ConfigMap/Secrets as above. For variable reference, see Environment variables reference (Database section).","title":"Configure external MySQL"},{"location":"how-to/configure-external-mysql/#how-to-use-an-external-mysql-database","text":"docker-mailserver can use an external MySQL (or compatible) database instead of the included database service. Use this for production, Kubernetes, or when reusing existing MySQL infrastructure.","title":"How to Use an External MySQL Database"},{"location":"how-to/configure-external-mysql/#steps","text":"","title":"Steps"},{"location":"how-to/configure-external-mysql/#1-create-the-database-and-user","text":"On the MySQL server: CREATE DATABASE mailserver CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ; Create a user with access to that database and set a password.","title":"1. Create the database and user"},{"location":"how-to/configure-external-mysql/#2-import-the-schema","text":"Import the mailserver and webmail schema from the project: mysql -h your-mysql-host -u root -p mailserver < target/db/rootfs/docker-entrypoint-initdb.d/001_mailserver.sql mysql -h your-mysql-host -u root -p mailserver < target/db/rootfs/docker-entrypoint-initdb.d/002_webmail.sql Adjust host, user, and paths as needed.","title":"2. Import the schema"},{"location":"how-to/configure-external-mysql/#3-configure-environment-variables","text":"In .env : MYSQL_HOST = your-mysql-host.example.com MYSQL_DATABASE = mailserver MYSQL_USER = mailserver_user MYSQL_PASSWORD = your_secure_password","title":"3. Configure environment variables"},{"location":"how-to/configure-external-mysql/#4-remove-or-exclude-the-database-service-docker-compose","text":"If using Docker Compose, remove or do not include the db service (e.g. comment out or omit deploy/compose/db.yaml ). Remove depends_on: db from services that referenced it so they use the external host instead.","title":"4. Remove or exclude the database service (Docker Compose)"},{"location":"how-to/configure-external-mysql/#5-restart-the-web-service","text":"Restart the web service so it connects to the external database and runs any migrations: Docker: bin/production.sh restart web or docker-compose restart web Kubernetes: kubectl rollout restart deployment/web -n mail","title":"5. Restart the web service"},{"location":"how-to/configure-external-mysql/#kubernetes","text":"Kustomize does not include a database service; you must provide an external MySQL (or compatible) database and set MYSQL_* in your ConfigMap/Secrets as above. For variable reference, see Environment variables reference (Database section).","title":"Kubernetes"},{"location":"how-to/configure-oauth2/","text":"How to Configure OAuth2 Login mailserver-admin can use OAuth2/OIDC for login. When enabled, users sign in via an external identity provider instead of (or in addition to) local credentials. OAuth2 is typically used to grant admin rights based on group membership. Steps 1. Create an OAuth2 client in your identity provider Create a client with: Redirect URI: https://your-domain/login/check-oauth (use your actual domain) Client ID and Client secret for use in .env 2. Set environment variables In .env (or the environment): OAUTH_ENABLED = true OAUTH_CLIENT_ID = your-client-id OAUTH_CLIENT_SECRET = your-client-secret OAUTH_AUTHORIZATION_URL = https://id.example.com/authorize OAUTH_ACCESS_TOKEN_URL = https://id.example.com/api/oidc/token OAUTH_INFOS_URL = https://id.example.com/api/oidc/userinfo OAUTH_BUTTON_TEXT = \"Login with OIDC\" OAUTH_ADMIN_GROUP = admin OAUTH_PATHS_IDENTIFIER = sub OAUTH_CREATE_USER = false Adjust URLs, scopes, and button text to match your provider. 3. Configure the user identifier OAUTH_PATHS_IDENTIFIER must point to a field in the provider\u2019s userinfo that contains an email address that exists as a user in the mailserver (same domain). The field should be write-protected in the provider so users cannot change it. Do not use a normal \u201cemail\u201d claim that users can edit. 4. Optional: auto-create users Set OAUTH_CREATE_USER=true to create a mailserver user when someone logs in via OAuth2 and no matching user exists. Use only if your provider guarantees a stable, domain-valid email identifier. 5. Restart the web service Restart the web container so the new variables are loaded. A login button for OAuth2 will appear on the login page. Flow User clicks the OAuth2 login button and is redirected to the provider. After authentication, the provider redirects back to /login/check-oauth . The application reads userinfo and takes the identifier from OAUTH_PATHS_IDENTIFIER . If the identifier matches an existing user, that user is logged in. If OAUTH_ADMIN_GROUP is set and the user is in that group, they get admin rights. If there is no match and OAUTH_CREATE_USER=true , a new user is created; otherwise login is denied. For all OAuth2 variables, see mailserver-admin configuration reference .","title":"Configure OAuth2"},{"location":"how-to/configure-oauth2/#how-to-configure-oauth2-login","text":"mailserver-admin can use OAuth2/OIDC for login. When enabled, users sign in via an external identity provider instead of (or in addition to) local credentials. OAuth2 is typically used to grant admin rights based on group membership.","title":"How to Configure OAuth2 Login"},{"location":"how-to/configure-oauth2/#steps","text":"","title":"Steps"},{"location":"how-to/configure-oauth2/#1-create-an-oauth2-client-in-your-identity-provider","text":"Create a client with: Redirect URI: https://your-domain/login/check-oauth (use your actual domain) Client ID and Client secret for use in .env","title":"1. Create an OAuth2 client in your identity provider"},{"location":"how-to/configure-oauth2/#2-set-environment-variables","text":"In .env (or the environment): OAUTH_ENABLED = true OAUTH_CLIENT_ID = your-client-id OAUTH_CLIENT_SECRET = your-client-secret OAUTH_AUTHORIZATION_URL = https://id.example.com/authorize OAUTH_ACCESS_TOKEN_URL = https://id.example.com/api/oidc/token OAUTH_INFOS_URL = https://id.example.com/api/oidc/userinfo OAUTH_BUTTON_TEXT = \"Login with OIDC\" OAUTH_ADMIN_GROUP = admin OAUTH_PATHS_IDENTIFIER = sub OAUTH_CREATE_USER = false Adjust URLs, scopes, and button text to match your provider.","title":"2. Set environment variables"},{"location":"how-to/configure-oauth2/#3-configure-the-user-identifier","text":"OAUTH_PATHS_IDENTIFIER must point to a field in the provider\u2019s userinfo that contains an email address that exists as a user in the mailserver (same domain). The field should be write-protected in the provider so users cannot change it. Do not use a normal \u201cemail\u201d claim that users can edit.","title":"3. Configure the user identifier"},{"location":"how-to/configure-oauth2/#4-optional-auto-create-users","text":"Set OAUTH_CREATE_USER=true to create a mailserver user when someone logs in via OAuth2 and no matching user exists. Use only if your provider guarantees a stable, domain-valid email identifier.","title":"4. Optional: auto-create users"},{"location":"how-to/configure-oauth2/#5-restart-the-web-service","text":"Restart the web container so the new variables are loaded. A login button for OAuth2 will appear on the login page.","title":"5. Restart the web service"},{"location":"how-to/configure-oauth2/#flow","text":"User clicks the OAuth2 login button and is redirected to the provider. After authentication, the provider redirects back to /login/check-oauth . The application reads userinfo and takes the identifier from OAUTH_PATHS_IDENTIFIER . If the identifier matches an existing user, that user is logged in. If OAUTH_ADMIN_GROUP is set and the user is in that group, they get admin rights. If there is no match and OAUTH_CREATE_USER=true , a new user is created; otherwise login is denied. For all OAuth2 variables, see mailserver-admin configuration reference .","title":"Flow"},{"location":"how-to/configure-php-sessions/","text":"How to Configure PHP Sessions The web service stores PHP sessions in Redis by default. You can switch to file-based or another handler via environment variables. Redis (default) No change needed if Redis is available. Default: PHP_SESSION_SAVE_HANDLER = redis PHP_SESSION_SAVE_PATH = tcp:// ${ REDIS_HOST } : ${ REDIS_PORT } ?auth = ${ REDIS_PASSWORD } File-based sessions To use the filesystem instead: Set in .env (or environment): PHP_SESSION_SAVE_HANDLER = files PHP_SESSION_SAVE_PATH = /tmp/sessions Mount a volume for the session directory so it persists and is writable: volumes : - session_data:/tmp/sessions Restart the web service. For variable reference, see Environment variables reference (PHP Sessions).","title":"Configure PHP sessions"},{"location":"how-to/configure-php-sessions/#how-to-configure-php-sessions","text":"The web service stores PHP sessions in Redis by default. You can switch to file-based or another handler via environment variables.","title":"How to Configure PHP Sessions"},{"location":"how-to/configure-php-sessions/#redis-default","text":"No change needed if Redis is available. Default: PHP_SESSION_SAVE_HANDLER = redis PHP_SESSION_SAVE_PATH = tcp:// ${ REDIS_HOST } : ${ REDIS_PORT } ?auth = ${ REDIS_PASSWORD }","title":"Redis (default)"},{"location":"how-to/configure-php-sessions/#file-based-sessions","text":"To use the filesystem instead: Set in .env (or environment): PHP_SESSION_SAVE_HANDLER = files PHP_SESSION_SAVE_PATH = /tmp/sessions Mount a volume for the session directory so it persists and is writable: volumes : - session_data:/tmp/sessions Restart the web service. For variable reference, see Environment variables reference (PHP Sessions).","title":"File-based sessions"},{"location":"how-to/configure-relayhost/","text":"How to Configure a Relay Host To send outgoing mail through another SMTP server (e.g. a provider or corporate server), configure a relay host. Steps 1. Create credentials file Create a file (e.g. sasl_passwd ) with: hostname username:password Example for relay at mailpit on port 1025: mailpit user1:password1 Set secure permissions: chmod 600 sasl_passwd 2. Mount the file into the MTA container In deploy/compose/mta.yaml (or your compose override), add a volume for the credentials file: volumes : - data-tls:/etc/postfix/tls:ro - ./sasl_passwd:/etc/postfix/sasl_passwd_ext:ro Use the path where the MTA expects it (e.g. /etc/postfix/sasl_passwd_ext ). 3. Set environment variables In .env : RELAYHOST =[ hostname ] :port RELAY_PASSWD_FILE = /etc/postfix/sasl_passwd_ext Example for Gmail: RELAYHOST =[ smtp.gmail.com ] :587 RELAY_PASSWD_FILE = /etc/postfix/sasl_passwd_ext Credentials file content for Gmail (use an app password): smtp.gmail.com your-email@gmail.com:your-app-password Example for Office 365: RELAYHOST =[ smtp.office365.com ] :587 RELAY_PASSWD_FILE = /etc/postfix/sasl_passwd_ext smtp.office365.com your-email@yourdomain.com:your-password 4. Restart the MTA bin/production.sh up -d mta (or docker-compose up -d mta ). Verification Send a test message via webmail and check MTA logs for successful relay (e.g. status=sent ). For reference, see Environment variables reference (Relay section).","title":"Configure relay host"},{"location":"how-to/configure-relayhost/#how-to-configure-a-relay-host","text":"To send outgoing mail through another SMTP server (e.g. a provider or corporate server), configure a relay host.","title":"How to Configure a Relay Host"},{"location":"how-to/configure-relayhost/#steps","text":"","title":"Steps"},{"location":"how-to/configure-relayhost/#1-create-credentials-file","text":"Create a file (e.g. sasl_passwd ) with: hostname username:password Example for relay at mailpit on port 1025: mailpit user1:password1 Set secure permissions: chmod 600 sasl_passwd","title":"1. Create credentials file"},{"location":"how-to/configure-relayhost/#2-mount-the-file-into-the-mta-container","text":"In deploy/compose/mta.yaml (or your compose override), add a volume for the credentials file: volumes : - data-tls:/etc/postfix/tls:ro - ./sasl_passwd:/etc/postfix/sasl_passwd_ext:ro Use the path where the MTA expects it (e.g. /etc/postfix/sasl_passwd_ext ).","title":"2. Mount the file into the MTA container"},{"location":"how-to/configure-relayhost/#3-set-environment-variables","text":"In .env : RELAYHOST =[ hostname ] :port RELAY_PASSWD_FILE = /etc/postfix/sasl_passwd_ext Example for Gmail: RELAYHOST =[ smtp.gmail.com ] :587 RELAY_PASSWD_FILE = /etc/postfix/sasl_passwd_ext Credentials file content for Gmail (use an app password): smtp.gmail.com your-email@gmail.com:your-app-password Example for Office 365: RELAYHOST =[ smtp.office365.com ] :587 RELAY_PASSWD_FILE = /etc/postfix/sasl_passwd_ext smtp.office365.com your-email@yourdomain.com:your-password","title":"3. Set environment variables"},{"location":"how-to/configure-relayhost/#4-restart-the-mta","text":"bin/production.sh up -d mta (or docker-compose up -d mta ).","title":"4. Restart the MTA"},{"location":"how-to/configure-relayhost/#verification","text":"Send a test message via webmail and check MTA logs for successful relay (e.g. status=sent ). For reference, see Environment variables reference (Relay section).","title":"Verification"},{"location":"how-to/configure-reverse-proxy/","text":"How to Configure a Reverse Proxy (Traefik) To run docker-mailserver behind a reverse proxy (e.g. Traefik) and preserve client IPs, enable PROXY protocol and point internal addresses at the proxy. Steps 1. Enable PROXY protocol In .env : MDA_UPSTREAM_PROXY = true MTA_UPSTREAM_PROXY = true MDA_UPSTREAM_PROXY applies to IMAP, IMAPS, POP3, POP3S. MTA_UPSTREAM_PROXY applies to SMTP and submission (587). 2. Set trusted proxies (if needed) If the web interface is behind a proxy, set trusted proxy IPs: TRUSTED_PROXIES = 10 .0.0.0/8 Use your proxy\u2019s CIDR range(s). 3. Point internal addresses at the proxy When traffic goes through the proxy, configure internal service addresses to point at the proxy\u2019s internal host/ports, not directly at MTA/MDA. Example for a Traefik internal service: MDA_IMAP_ADDRESS = traefik-internal:33143 MDA_IMAPS_ADDRESS = traefik-internal:33993 MDA_POP3_ADDRESS = traefik-internal:33110 MDA_POP3S_ADDRESS = traefik-internal:33995 MTA_SMTP_ADDRESS = traefik-internal:3325 MTA_SMTP_SUBMISSION_ADDRESS = traefik-internal:33587 Adjust host and port names to match your Traefik configuration. 4. Configure Traefik (Kubernetes) To use the provided Traefik ingress with Kustomize, add: resources : - deploy/kustomize/ingress/traefik This adds IngressRoutes for SMTP (25), submission (587), IMAP (143), IMAPS (993), POP3 (110), POP3S (995). Configure entry points and PROXY protocol (v2) on the Traefik side to match. Verification Check Traefik logs and IngressRoutes. Test connectivity to SMTP, submission, IMAP, and POP3 on the proxy\u2019s public ports. For variable details, see Environment variables reference (Proxy Protocol and Service Addresses). For a Docker Compose example, see Traefik reverse proxy example .","title":"Configure reverse proxy"},{"location":"how-to/configure-reverse-proxy/#how-to-configure-a-reverse-proxy-traefik","text":"To run docker-mailserver behind a reverse proxy (e.g. Traefik) and preserve client IPs, enable PROXY protocol and point internal addresses at the proxy.","title":"How to Configure a Reverse Proxy (Traefik)"},{"location":"how-to/configure-reverse-proxy/#steps","text":"","title":"Steps"},{"location":"how-to/configure-reverse-proxy/#1-enable-proxy-protocol","text":"In .env : MDA_UPSTREAM_PROXY = true MTA_UPSTREAM_PROXY = true MDA_UPSTREAM_PROXY applies to IMAP, IMAPS, POP3, POP3S. MTA_UPSTREAM_PROXY applies to SMTP and submission (587).","title":"1. Enable PROXY protocol"},{"location":"how-to/configure-reverse-proxy/#2-set-trusted-proxies-if-needed","text":"If the web interface is behind a proxy, set trusted proxy IPs: TRUSTED_PROXIES = 10 .0.0.0/8 Use your proxy\u2019s CIDR range(s).","title":"2. Set trusted proxies (if needed)"},{"location":"how-to/configure-reverse-proxy/#3-point-internal-addresses-at-the-proxy","text":"When traffic goes through the proxy, configure internal service addresses to point at the proxy\u2019s internal host/ports, not directly at MTA/MDA. Example for a Traefik internal service: MDA_IMAP_ADDRESS = traefik-internal:33143 MDA_IMAPS_ADDRESS = traefik-internal:33993 MDA_POP3_ADDRESS = traefik-internal:33110 MDA_POP3S_ADDRESS = traefik-internal:33995 MTA_SMTP_ADDRESS = traefik-internal:3325 MTA_SMTP_SUBMISSION_ADDRESS = traefik-internal:33587 Adjust host and port names to match your Traefik configuration.","title":"3. Point internal addresses at the proxy"},{"location":"how-to/configure-reverse-proxy/#4-configure-traefik-kubernetes","text":"To use the provided Traefik ingress with Kustomize, add: resources : - deploy/kustomize/ingress/traefik This adds IngressRoutes for SMTP (25), submission (587), IMAP (143), IMAPS (993), POP3 (110), POP3S (995). Configure entry points and PROXY protocol (v2) on the Traefik side to match.","title":"4. Configure Traefik (Kubernetes)"},{"location":"how-to/configure-reverse-proxy/#verification","text":"Check Traefik logs and IngressRoutes. Test connectivity to SMTP, submission, IMAP, and POP3 on the proxy\u2019s public ports. For variable details, see Environment variables reference (Proxy Protocol and Service Addresses). For a Docker Compose example, see Traefik reverse proxy example .","title":"Verification"},{"location":"how-to/configure-roundcube-plugins/","text":"How to Add Roundcube Plugins The web image supports installing Roundcube plugins at build time via the RC_PLUGINS build argument. Steps 1. Set RC_PLUGINS in the web build In deploy/compose/web.yaml (or your override), add or edit the build args: services : web : build : context : ../../target/web args : RC_PLUGINS : \"vendor/plugin-name another-vendor/another-plugin\" Use a space-separated list of plugins in vendor/plugin-name form. Example: RC_PLUGINS : \"johndoh/contextmenu jfcherng-roundcube/show-folder-size kolab/calendar\" 2. Rebuild and start the web service docker-compose build web docker-compose up -d web (or bin/production.sh if you use that). Changes to RC_PLUGINS require a rebuild. Plugin sources Plugins are typically installed from Packagist ( roundcube-plugin ), GitHub, or other Composer-compatible sources. Ensure plugins match the Roundcube version in the image. Notes Plugin names must be vendor/plugin-name . Multiple plugins are space-separated. Plugins are installed during the Docker build; changing RC_PLUGINS means rebuilding the image.","title":"Configure Roundcube plugins"},{"location":"how-to/configure-roundcube-plugins/#how-to-add-roundcube-plugins","text":"The web image supports installing Roundcube plugins at build time via the RC_PLUGINS build argument.","title":"How to Add Roundcube Plugins"},{"location":"how-to/configure-roundcube-plugins/#steps","text":"","title":"Steps"},{"location":"how-to/configure-roundcube-plugins/#1-set-rc_plugins-in-the-web-build","text":"In deploy/compose/web.yaml (or your override), add or edit the build args: services : web : build : context : ../../target/web args : RC_PLUGINS : \"vendor/plugin-name another-vendor/another-plugin\" Use a space-separated list of plugins in vendor/plugin-name form. Example: RC_PLUGINS : \"johndoh/contextmenu jfcherng-roundcube/show-folder-size kolab/calendar\"","title":"1. Set RC_PLUGINS in the web build"},{"location":"how-to/configure-roundcube-plugins/#2-rebuild-and-start-the-web-service","text":"docker-compose build web docker-compose up -d web (or bin/production.sh if you use that). Changes to RC_PLUGINS require a rebuild.","title":"2. Rebuild and start the web service"},{"location":"how-to/configure-roundcube-plugins/#plugin-sources","text":"Plugins are typically installed from Packagist ( roundcube-plugin ), GitHub, or other Composer-compatible sources. Ensure plugins match the Roundcube version in the image.","title":"Plugin sources"},{"location":"how-to/configure-roundcube-plugins/#notes","text":"Plugin names must be vendor/plugin-name . Multiple plugins are space-separated. Plugins are installed during the Docker build; changing RC_PLUGINS means rebuilding the image.","title":"Notes"},{"location":"how-to/configure-tls/","text":"How to Configure TLS Certificates This guide covers TLS for mail protocols (SMTP, IMAP, POP3) served by the MTA (Postfix) and MDA (Dovecot) containers. To terminate TLS for the web interface (port 81), use a reverse proxy \u2014 see How to configure a reverse proxy . By default the mailserver uses a shared data-tls volume with internally generated certificates. To use external certificates (e.g. Let's Encrypt), mount certificate and key files into the MTA and MDA containers. Certificate locations MDA (Dovecot): /etc/dovecot/tls/tls.crt , /etc/dovecot/tls/tls.key MTA (Postfix): /etc/postfix/tls/tls.crt , /etc/postfix/tls/tls.key Steps (Docker Compose) 1. Mount certificates in MDA In deploy/compose/mda.yaml , replace the data-tls volume with file mounts: volumes : - data-mail:/srv/vmail - /path/to/certificate.crt:/etc/dovecot/tls/tls.crt:ro - /path/to/private.key:/etc/dovecot/tls/tls.key:ro 2. Mount certificates in MTA In deploy/compose/mta.yaml , replace the data-tls volume with file mounts: volumes : - /path/to/certificate.crt:/etc/postfix/tls/tls.crt:ro - /path/to/private.key:/etc/postfix/tls/tls.key:ro 3. Remove or disable the SSL service (optional) If you no longer need internal certificate generation, remove the SSL service from your compose stack so it does not overwrite or conflict with your certificates. 4. Restart MTA and MDA bin/production.sh up -d mta mda Let\u2019s Encrypt example If certificates are in /etc/letsencrypt/live/yourdomain.com/ : # mda - /etc/letsencrypt/live/yourdomain.com/fullchain.pem:/etc/dovecot/tls/tls.crt:ro - /etc/letsencrypt/live/yourdomain.com/privkey.pem:/etc/dovecot/tls/tls.key:ro # mta - /etc/letsencrypt/live/yourdomain.com/fullchain.pem:/etc/postfix/tls/tls.crt:ro - /etc/letsencrypt/live/yourdomain.com/privkey.pem:/etc/postfix/tls/tls.key:ro Use fullchain.pem so the chain is complete. Requirements Format: PEM ( .crt , .pem , .key ). Permissions: Certificate and key readable by the container user; key with restricted permissions (e.g. 600). If TLS errors appear, check paths and permissions and review MTA/MDA logs: bin/production.sh logs mta , bin/production.sh logs mda .","title":"Configure TLS certificates"},{"location":"how-to/configure-tls/#how-to-configure-tls-certificates","text":"This guide covers TLS for mail protocols (SMTP, IMAP, POP3) served by the MTA (Postfix) and MDA (Dovecot) containers. To terminate TLS for the web interface (port 81), use a reverse proxy \u2014 see How to configure a reverse proxy . By default the mailserver uses a shared data-tls volume with internally generated certificates. To use external certificates (e.g. Let's Encrypt), mount certificate and key files into the MTA and MDA containers.","title":"How to Configure TLS Certificates"},{"location":"how-to/configure-tls/#certificate-locations","text":"MDA (Dovecot): /etc/dovecot/tls/tls.crt , /etc/dovecot/tls/tls.key MTA (Postfix): /etc/postfix/tls/tls.crt , /etc/postfix/tls/tls.key","title":"Certificate locations"},{"location":"how-to/configure-tls/#steps-docker-compose","text":"","title":"Steps (Docker Compose)"},{"location":"how-to/configure-tls/#1-mount-certificates-in-mda","text":"In deploy/compose/mda.yaml , replace the data-tls volume with file mounts: volumes : - data-mail:/srv/vmail - /path/to/certificate.crt:/etc/dovecot/tls/tls.crt:ro - /path/to/private.key:/etc/dovecot/tls/tls.key:ro","title":"1. Mount certificates in MDA"},{"location":"how-to/configure-tls/#2-mount-certificates-in-mta","text":"In deploy/compose/mta.yaml , replace the data-tls volume with file mounts: volumes : - /path/to/certificate.crt:/etc/postfix/tls/tls.crt:ro - /path/to/private.key:/etc/postfix/tls/tls.key:ro","title":"2. Mount certificates in MTA"},{"location":"how-to/configure-tls/#3-remove-or-disable-the-ssl-service-optional","text":"If you no longer need internal certificate generation, remove the SSL service from your compose stack so it does not overwrite or conflict with your certificates.","title":"3. Remove or disable the SSL service (optional)"},{"location":"how-to/configure-tls/#4-restart-mta-and-mda","text":"bin/production.sh up -d mta mda","title":"4. Restart MTA and MDA"},{"location":"how-to/configure-tls/#lets-encrypt-example","text":"If certificates are in /etc/letsencrypt/live/yourdomain.com/ : # mda - /etc/letsencrypt/live/yourdomain.com/fullchain.pem:/etc/dovecot/tls/tls.crt:ro - /etc/letsencrypt/live/yourdomain.com/privkey.pem:/etc/dovecot/tls/tls.key:ro # mta - /etc/letsencrypt/live/yourdomain.com/fullchain.pem:/etc/postfix/tls/tls.crt:ro - /etc/letsencrypt/live/yourdomain.com/privkey.pem:/etc/postfix/tls/tls.key:ro Use fullchain.pem so the chain is complete.","title":"Let\u2019s Encrypt example"},{"location":"how-to/configure-tls/#requirements","text":"Format: PEM ( .crt , .pem , .key ). Permissions: Certificate and key readable by the container user; key with restricted permissions (e.g. 600). If TLS errors appear, check paths and permissions and review MTA/MDA logs: bin/production.sh logs mta , bin/production.sh logs mda .","title":"Requirements"},{"location":"how-to/install-docker/","text":"How to Install with Docker Compose This guide describes how to install docker-mailserver using Docker Compose. If you are setting up docker-mailserver for the first time, the Getting Started tutorial provides a step-by-step walkthrough that covers these same steps with more explanation. Prerequisites Docker and Docker Compose installed on the host A domain name Root or sudo access on the host Steps 1. Configure environment variables Copy the example environment file and edit .env : cp .env.dist .env Set at least MYSQL_PASSWORD , REDIS_PASSWORD , CONTROLLER_PASSWORD , and DOVEADM_API_KEY . See Environment variables reference . 2. Pull images bin/production.sh pull 3. Start services bin/production.sh up -d --wait 4. Run setup wizard bin/production.sh run --rm web setup.sh Follow the wizard to create your first account and admin user. 5. Access the management interface Management: http://127.0.0.1:81/manager/ Webmail: http://127.0.0.1:81/webmail/ Post-installation Configure DNS (MX, SPF, DKIM, DMARC). See How to configure DNS and DNS records reference . Replace self-signed TLS with valid certificates. See How to configure TLS certificates . Configure firewall, backups, and monitoring as needed. Troubleshooting Services not starting: Check logs with docker-compose logs or bin/production.sh logs . Database errors: Verify MYSQL_* and database accessibility. TLS issues: Check certificate paths and permissions. Port conflicts: Ensure ports 25, 110, 143, 587, 993, 995, 81 are free. For port details, see Ports reference .","title":"Install with Docker"},{"location":"how-to/install-docker/#how-to-install-with-docker-compose","text":"This guide describes how to install docker-mailserver using Docker Compose. If you are setting up docker-mailserver for the first time, the Getting Started tutorial provides a step-by-step walkthrough that covers these same steps with more explanation.","title":"How to Install with Docker Compose"},{"location":"how-to/install-docker/#prerequisites","text":"Docker and Docker Compose installed on the host A domain name Root or sudo access on the host","title":"Prerequisites"},{"location":"how-to/install-docker/#steps","text":"","title":"Steps"},{"location":"how-to/install-docker/#1-configure-environment-variables","text":"Copy the example environment file and edit .env : cp .env.dist .env Set at least MYSQL_PASSWORD , REDIS_PASSWORD , CONTROLLER_PASSWORD , and DOVEADM_API_KEY . See Environment variables reference .","title":"1. Configure environment variables"},{"location":"how-to/install-docker/#2-pull-images","text":"bin/production.sh pull","title":"2. Pull images"},{"location":"how-to/install-docker/#3-start-services","text":"bin/production.sh up -d --wait","title":"3. Start services"},{"location":"how-to/install-docker/#4-run-setup-wizard","text":"bin/production.sh run --rm web setup.sh Follow the wizard to create your first account and admin user.","title":"4. Run setup wizard"},{"location":"how-to/install-docker/#5-access-the-management-interface","text":"Management: http://127.0.0.1:81/manager/ Webmail: http://127.0.0.1:81/webmail/","title":"5. Access the management interface"},{"location":"how-to/install-docker/#post-installation","text":"Configure DNS (MX, SPF, DKIM, DMARC). See How to configure DNS and DNS records reference . Replace self-signed TLS with valid certificates. See How to configure TLS certificates . Configure firewall, backups, and monitoring as needed.","title":"Post-installation"},{"location":"how-to/install-docker/#troubleshooting","text":"Services not starting: Check logs with docker-compose logs or bin/production.sh logs . Database errors: Verify MYSQL_* and database accessibility. TLS issues: Check certificate paths and permissions. Port conflicts: Ensure ports 25, 110, 143, 587, 993, 995, 81 are free. For port details, see Ports reference .","title":"Troubleshooting"},{"location":"how-to/install-kubernetes/","text":"How to Install on Kubernetes This guide describes how to deploy docker-mailserver on Kubernetes with Kustomize. An external MySQL-compatible database is required; the kustomization does not provision a database. A full example is in example-configs/kustomize/external-db-and-https-ingress . Prerequisites Kubernetes cluster with kubectl configured MySQL or Percona XtraDB (or compatible) database Domain and DNS (for ingress) Steps 1. Configure environment (ConfigMap and Secrets) Use .env.dist as a reference for required variables. Create a Kubernetes ConfigMap for non-sensitive values and Secrets for sensitive values (credentials, passwords, API keys). See Environment variables reference for the full list. See the example-configs/kustomize/external-db-and-https-ingress directory for a sample configuration showing how to structure these resources. 2. Create namespace kubectl create namespace mail 3. Generate TLS certificates (if not using cert-manager) bin/create-tls-certs.sh This writes a self-signed certificate to config/tls/tls.crt and key to config/tls/tls.key . For production, use CA certificates (e.g. cert-manager with Let's Encrypt) instead. 4. Create TLS secret kubectl create -n mail secret tls tls-certs \\ --cert = config/tls/tls.crt \\ --key = config/tls/tls.key 5. Apply Kustomize manifests From the project root: kubectl apply -n mail -k . 6. Verify pods kubectl get pods -n mail Wait until all pods are running and healthy. 7. Run setup wizard kubectl exec -n mail -it deployment/web -c php-fpm -- setup.sh Use the wizard to set initial configuration, create the first email address, and create an admin user. 8. Access the management interface Use your configured ingress and the admin credentials from the wizard. Post-installation Configure DNS and TLS like Docker deployment. See How to configure DNS and How to configure TLS certificates . Change DOVEADM_API_KEY from default if using observability (v7.3+). Troubleshooting Pods not starting: Check logs with kubectl logs -n mail <pod-name> and events with kubectl describe pod -n mail <pod-name> . Database errors: Verify database connectivity and that the MYSQL_* variables in ConfigMap/Secrets are correct. TLS errors: Confirm the tls-certs secret exists in the mail namespace and certificate paths are correct. Setup wizard fails: Ensure the web pod is running ( kubectl get pods -n mail ) before running the exec command.","title":"Install on Kubernetes"},{"location":"how-to/install-kubernetes/#how-to-install-on-kubernetes","text":"This guide describes how to deploy docker-mailserver on Kubernetes with Kustomize. An external MySQL-compatible database is required; the kustomization does not provision a database. A full example is in example-configs/kustomize/external-db-and-https-ingress .","title":"How to Install on Kubernetes"},{"location":"how-to/install-kubernetes/#prerequisites","text":"Kubernetes cluster with kubectl configured MySQL or Percona XtraDB (or compatible) database Domain and DNS (for ingress)","title":"Prerequisites"},{"location":"how-to/install-kubernetes/#steps","text":"","title":"Steps"},{"location":"how-to/install-kubernetes/#1-configure-environment-configmap-and-secrets","text":"Use .env.dist as a reference for required variables. Create a Kubernetes ConfigMap for non-sensitive values and Secrets for sensitive values (credentials, passwords, API keys). See Environment variables reference for the full list. See the example-configs/kustomize/external-db-and-https-ingress directory for a sample configuration showing how to structure these resources.","title":"1. Configure environment (ConfigMap and Secrets)"},{"location":"how-to/install-kubernetes/#2-create-namespace","text":"kubectl create namespace mail","title":"2. Create namespace"},{"location":"how-to/install-kubernetes/#3-generate-tls-certificates-if-not-using-cert-manager","text":"bin/create-tls-certs.sh This writes a self-signed certificate to config/tls/tls.crt and key to config/tls/tls.key . For production, use CA certificates (e.g. cert-manager with Let's Encrypt) instead.","title":"3. Generate TLS certificates (if not using cert-manager)"},{"location":"how-to/install-kubernetes/#4-create-tls-secret","text":"kubectl create -n mail secret tls tls-certs \\ --cert = config/tls/tls.crt \\ --key = config/tls/tls.key","title":"4. Create TLS secret"},{"location":"how-to/install-kubernetes/#5-apply-kustomize-manifests","text":"From the project root: kubectl apply -n mail -k .","title":"5. Apply Kustomize manifests"},{"location":"how-to/install-kubernetes/#6-verify-pods","text":"kubectl get pods -n mail Wait until all pods are running and healthy.","title":"6. Verify pods"},{"location":"how-to/install-kubernetes/#7-run-setup-wizard","text":"kubectl exec -n mail -it deployment/web -c php-fpm -- setup.sh Use the wizard to set initial configuration, create the first email address, and create an admin user.","title":"7. Run setup wizard"},{"location":"how-to/install-kubernetes/#8-access-the-management-interface","text":"Use your configured ingress and the admin credentials from the wizard.","title":"8. Access the management interface"},{"location":"how-to/install-kubernetes/#post-installation","text":"Configure DNS and TLS like Docker deployment. See How to configure DNS and How to configure TLS certificates . Change DOVEADM_API_KEY from default if using observability (v7.3+).","title":"Post-installation"},{"location":"how-to/install-kubernetes/#troubleshooting","text":"Pods not starting: Check logs with kubectl logs -n mail <pod-name> and events with kubectl describe pod -n mail <pod-name> . Database errors: Verify database connectivity and that the MYSQL_* variables in ConfigMap/Secrets are correct. TLS errors: Confirm the tls-certs secret exists in the mail namespace and certificate paths are correct. Setup wizard fails: Ensure the web pod is running ( kubectl get pods -n mail ) before running the exec command.","title":"Troubleshooting"},{"location":"how-to/ios-macos-profile/","text":"How to Use the iOS / macOS Mail Profile The iOS / macOS Profile feature in mailserver-admin generates configuration profiles for Apple Mail. These profiles set up IMAP and SMTP so users do not have to enter server details manually. Use the feature from the management interface to generate and download the profile for the user\u2019s device. For Apple\u2019s documentation on configuring Mail: macOS iOS Note: Profile generation uses the same TLS certificate the mailserver presents to clients. To generate profiles, that certificate must be mounted into the web container (see Upgrade changelog v7.1).","title":"iOS / macOS profile"},{"location":"how-to/ios-macos-profile/#how-to-use-the-ios-macos-mail-profile","text":"The iOS / macOS Profile feature in mailserver-admin generates configuration profiles for Apple Mail. These profiles set up IMAP and SMTP so users do not have to enter server details manually. Use the feature from the management interface to generate and download the profile for the user\u2019s device. For Apple\u2019s documentation on configuring Mail: macOS iOS Note: Profile generation uses the same TLS certificate the mailserver presents to clients. To generate profiles, that certificate must be mounted into the web container (see Upgrade changelog v7.1).","title":"How to Use the iOS / macOS Mail Profile"},{"location":"how-to/manage-aliases/","text":"How to Manage Aliases Aliases forward incoming mail from one address to one or more destinations (local users or external addresses). Admin can manage all aliases; Domain Admin only aliases in their domain; User cannot manage aliases. Add an alias Log in to the management interface. Open Alias in the menu. Click Add Alias . Enter: Source Address: Local part + domain (e.g. info@example.com ). Leave the local part empty for a catch-all alias. Destination Address(es): One or more addresses to forward to. Save. The source must belong to an existing domain. Destinations can be local users or external addresses. You can create multiple aliases with the same source and different destinations to forward to several recipients. Edit an alias Open Alias in the menu. Select the alias. Change source or destination(s). Save. Delete an alias Open Alias in the menu. Select the alias. Confirm deletion. Deleting an alias only removes the forwarding rule; it does not delete user accounts or mail. Examples Generic addresses: info@example.com \u2192 team@example.com ; support@example.com \u2192 support1@example.com, support2@example.com . Personal: john.doe@example.com \u2192 john.doe@gmail.com . Distribution: announcements@example.com \u2192 user1@example.com, user2@example.com . For access control, see User roles reference .","title":"Manage aliases"},{"location":"how-to/manage-aliases/#how-to-manage-aliases","text":"Aliases forward incoming mail from one address to one or more destinations (local users or external addresses). Admin can manage all aliases; Domain Admin only aliases in their domain; User cannot manage aliases.","title":"How to Manage Aliases"},{"location":"how-to/manage-aliases/#add-an-alias","text":"Log in to the management interface. Open Alias in the menu. Click Add Alias . Enter: Source Address: Local part + domain (e.g. info@example.com ). Leave the local part empty for a catch-all alias. Destination Address(es): One or more addresses to forward to. Save. The source must belong to an existing domain. Destinations can be local users or external addresses. You can create multiple aliases with the same source and different destinations to forward to several recipients.","title":"Add an alias"},{"location":"how-to/manage-aliases/#edit-an-alias","text":"Open Alias in the menu. Select the alias. Change source or destination(s). Save.","title":"Edit an alias"},{"location":"how-to/manage-aliases/#delete-an-alias","text":"Open Alias in the menu. Select the alias. Confirm deletion. Deleting an alias only removes the forwarding rule; it does not delete user accounts or mail.","title":"Delete an alias"},{"location":"how-to/manage-aliases/#examples","text":"Generic addresses: info@example.com \u2192 team@example.com ; support@example.com \u2192 support1@example.com, support2@example.com . Personal: john.doe@example.com \u2192 john.doe@gmail.com . Distribution: announcements@example.com \u2192 user1@example.com, user2@example.com . For access control, see User roles reference .","title":"Examples"},{"location":"how-to/manage-domains/","text":"How to Manage Domains Domains define the email namespaces your mailserver handles. All addresses must belong to a configured domain. Only users with Admin role can add, edit, or delete domains; Domain Admins and regular users cannot. Add a domain Log in to the management interface. Open Domain in the menu. Click Add Domain . Enter the domain name (e.g. example.com ). Save. The domain must be a valid domain name. It is available for users and aliases immediately. Delete a domain Open Domain in the menu. Select the domain to delete. Confirm the deletion. Deleting a domain removes all associated users, aliases, and DKIM configuration. This cannot be undone. Back up data before deleting. Changing a domain name Changing the domain name is not supported. To use a different name, delete the domain and add a new one with the new name (and reconfigure users/aliases as needed). For access control details, see User roles reference .","title":"Manage domains"},{"location":"how-to/manage-domains/#how-to-manage-domains","text":"Domains define the email namespaces your mailserver handles. All addresses must belong to a configured domain. Only users with Admin role can add, edit, or delete domains; Domain Admins and regular users cannot.","title":"How to Manage Domains"},{"location":"how-to/manage-domains/#add-a-domain","text":"Log in to the management interface. Open Domain in the menu. Click Add Domain . Enter the domain name (e.g. example.com ). Save. The domain must be a valid domain name. It is available for users and aliases immediately.","title":"Add a domain"},{"location":"how-to/manage-domains/#delete-a-domain","text":"Open Domain in the menu. Select the domain to delete. Confirm the deletion. Deleting a domain removes all associated users, aliases, and DKIM configuration. This cannot be undone. Back up data before deleting.","title":"Delete a domain"},{"location":"how-to/manage-domains/#changing-a-domain-name","text":"Changing the domain name is not supported. To use a different name, delete the domain and add a new one with the new name (and reconfigure users/aliases as needed). For access control details, see User roles reference .","title":"Changing a domain name"},{"location":"how-to/manage-fetchmail/","text":"How to Manage Fetchmail Accounts Fetchmail retrieves mail from external servers (POP3/IMAP) and delivers it to local mailboxes. Admin can manage all fetchmail accounts; Domain Admin only for users in their domain; User only their own accounts. Add a fetchmail account Log in to the management interface. Open Fetchmail in the menu. Click Add Fetchmail Account . Enter: User: Local user that will receive the mail Server: Hostname or IP of the external mail server Port: 110 (POP3), 143 (IMAP), 995 (POP3S), 993 (IMAPS) Protocol: POP3 or IMAP Username and Password for the external server SSL and SSL Verify as needed Save. Edit a fetchmail account Open Fetchmail in the menu. Select the account. Change server, port, protocol, credentials, or SSL settings. Save. The \u201cLast run log\u201d field shows the last transaction with the external server and helps with troubleshooting. Delete a fetchmail account Open Fetchmail in the menu. Select the account. Confirm deletion. Deleting stops retrieval; mail already delivered to the local mailbox is not removed. Security Use strong, unique passwords for external accounts. Enable SSL to protect credentials in transit. Review and disable unused fetchmail accounts. Ensure the mailserver can reach the external servers (firewall, DNS). Fetchmail runs on a schedule defined at the mailserver level. For access control, see User roles reference .","title":"Manage fetchmail"},{"location":"how-to/manage-fetchmail/#how-to-manage-fetchmail-accounts","text":"Fetchmail retrieves mail from external servers (POP3/IMAP) and delivers it to local mailboxes. Admin can manage all fetchmail accounts; Domain Admin only for users in their domain; User only their own accounts.","title":"How to Manage Fetchmail Accounts"},{"location":"how-to/manage-fetchmail/#add-a-fetchmail-account","text":"Log in to the management interface. Open Fetchmail in the menu. Click Add Fetchmail Account . Enter: User: Local user that will receive the mail Server: Hostname or IP of the external mail server Port: 110 (POP3), 143 (IMAP), 995 (POP3S), 993 (IMAPS) Protocol: POP3 or IMAP Username and Password for the external server SSL and SSL Verify as needed Save.","title":"Add a fetchmail account"},{"location":"how-to/manage-fetchmail/#edit-a-fetchmail-account","text":"Open Fetchmail in the menu. Select the account. Change server, port, protocol, credentials, or SSL settings. Save. The \u201cLast run log\u201d field shows the last transaction with the external server and helps with troubleshooting.","title":"Edit a fetchmail account"},{"location":"how-to/manage-fetchmail/#delete-a-fetchmail-account","text":"Open Fetchmail in the menu. Select the account. Confirm deletion. Deleting stops retrieval; mail already delivered to the local mailbox is not removed.","title":"Delete a fetchmail account"},{"location":"how-to/manage-fetchmail/#security","text":"Use strong, unique passwords for external accounts. Enable SSL to protect credentials in transit. Review and disable unused fetchmail accounts. Ensure the mailserver can reach the external servers (firewall, DNS). Fetchmail runs on a schedule defined at the mailserver level. For access control, see User roles reference .","title":"Security"},{"location":"how-to/manage-users/","text":"How to Manage Users Users are email accounts that can send and receive mail through the mailserver. Access depends on role: Admin can manage all users; Domain Admin only users in their domain; User can only change their own settings. Add a user Log in to the management interface. Open User in the menu. Click Add User . Enter: Email Address (e.g. user@example.com ) Password Quota (optional, MB) Admin / Domain Admin / Enabled / Send Only as needed Save. The email must belong to an existing domain. The password must meet the configured policy. Edit a user Open User in the menu. Select the user. Change password, quota, Admin, Domain Admin, Enabled, or Send Only as needed. Save. Changing the email address is not supported. To use a new address, create a new user and migrate data if needed. Delete a user Open User in the menu. Select the user. Confirm deletion. Deleting a user removes the account and all mail. This cannot be undone. Back up important mail first. User properties Email Address: Local part + domain; must be valid (RFC 5322). Password: Stored hashed; policies enforced by the mailserver. Quota: Mailbox size limit in MB. When exceeded, incoming mail can be rejected and the user cannot send until space is freed; warnings are sent. Send Only: User can only send; no IMAP/POP3/webmail. Admin / Domain Admin: See User roles reference . Users access mail via IMAP (143 with TLS), POP3 (110 with TLS), SMTP submission (587 with TLS), and webmail. They log in with full email and password. For roles and permissions, see User roles reference .","title":"Manage users"},{"location":"how-to/manage-users/#how-to-manage-users","text":"Users are email accounts that can send and receive mail through the mailserver. Access depends on role: Admin can manage all users; Domain Admin only users in their domain; User can only change their own settings.","title":"How to Manage Users"},{"location":"how-to/manage-users/#add-a-user","text":"Log in to the management interface. Open User in the menu. Click Add User . Enter: Email Address (e.g. user@example.com ) Password Quota (optional, MB) Admin / Domain Admin / Enabled / Send Only as needed Save. The email must belong to an existing domain. The password must meet the configured policy.","title":"Add a user"},{"location":"how-to/manage-users/#edit-a-user","text":"Open User in the menu. Select the user. Change password, quota, Admin, Domain Admin, Enabled, or Send Only as needed. Save. Changing the email address is not supported. To use a new address, create a new user and migrate data if needed.","title":"Edit a user"},{"location":"how-to/manage-users/#delete-a-user","text":"Open User in the menu. Select the user. Confirm deletion. Deleting a user removes the account and all mail. This cannot be undone. Back up important mail first.","title":"Delete a user"},{"location":"how-to/manage-users/#user-properties","text":"Email Address: Local part + domain; must be valid (RFC 5322). Password: Stored hashed; policies enforced by the mailserver. Quota: Mailbox size limit in MB. When exceeded, incoming mail can be rejected and the user cannot send until space is freed; warnings are sent. Send Only: User can only send; no IMAP/POP3/webmail. Admin / Domain Admin: See User roles reference . Users access mail via IMAP (143 with TLS), POP3 (110 with TLS), SMTP submission (587 with TLS), and webmail. They log in with full email and password. For roles and permissions, see User roles reference .","title":"User properties"},{"location":"how-to/upgrade/","text":"How to Upgrade When upgrading docker-mailserver: Review Upgrade changelog for your target version. Update deployment manifests in deploy/compose and deploy/kustomize for any volume or configuration changes. Update .env for new or changed environment variables. Pull new images (Docker) or update image tags (Kubernetes) and redeploy. Run any version-specific steps from the changelog (e.g. changing DOVEADM_API_KEY for v7.3). For version-by-version notes, see Upgrade changelog .","title":"Upgrade"},{"location":"how-to/upgrade/#how-to-upgrade","text":"When upgrading docker-mailserver: Review Upgrade changelog for your target version. Update deployment manifests in deploy/compose and deploy/kustomize for any volume or configuration changes. Update .env for new or changed environment variables. Pull new images (Docker) or update image tags (Kubernetes) and redeploy. Run any version-specific steps from the changelog (e.g. changing DOVEADM_API_KEY for v7.3). For version-by-version notes, see Upgrade changelog .","title":"How to Upgrade"},{"location":"how-to/validate-dns/","text":"How to Validate DNS with the Wizard The DNS Validation Wizard in the management interface checks that MX, SPF, DKIM, and DMARC records for your domain are correctly configured. Steps Log in to the management interface. Open the DNS Validation Wizard (e.g. from the dashboard or menu). Select the domain to check. Review the validation result for each record type. The wizard shows which records are correct and which need attention. Fix any failures in your DNS and run the wizard again. Propagation DNS updates can take from a few minutes up to 48 hours to propagate. If the wizard fails immediately after adding or changing records, wait for propagation and run the wizard again. For required record types and formats, see DNS records reference . For step-by-step DNS setup, see How to configure DNS for your domain .","title":"Validate DNS (wizard)"},{"location":"how-to/validate-dns/#how-to-validate-dns-with-the-wizard","text":"The DNS Validation Wizard in the management interface checks that MX, SPF, DKIM, and DMARC records for your domain are correctly configured.","title":"How to Validate DNS with the Wizard"},{"location":"how-to/validate-dns/#steps","text":"Log in to the management interface. Open the DNS Validation Wizard (e.g. from the dashboard or menu). Select the domain to check. Review the validation result for each record type. The wizard shows which records are correct and which need attention. Fix any failures in your DNS and run the wizard again.","title":"Steps"},{"location":"how-to/validate-dns/#propagation","text":"DNS updates can take from a few minutes up to 48 hours to propagate. If the wizard fails immediately after adding or changing records, wait for propagation and run the wizard again. For required record types and formats, see DNS records reference . For step-by-step DNS setup, see How to configure DNS for your domain .","title":"Propagation"},{"location":"observability/intro/","text":"Observability See About observability for an overview of the observability features in mailserver-admin and how they work.","title":"Observability"},{"location":"observability/intro/#observability","text":"See About observability for an overview of the observability features in mailserver-admin and how they work.","title":"Observability"},{"location":"reference/dns-records/","text":"DNS Records Reference DNS record types and formats required for the mailserver. Configure these in your domain's DNS zone. Summary Record Type Name Purpose MX @ Direct incoming mail A mail Resolve mailserver hostname (IPv4) AAAA mail Resolve mailserver hostname (IPv6) TXT (SPF) @ Authorize sending servers TXT (DKIM) default._domainkey Email signature verification TXT (DMARC) _dmarc Authentication policy MX Record Directs incoming mail to the mailserver. Use the value of MAILNAME . Type: MX Name: @ (or domain name) Priority: 10 Value: mail.example.com Example for example.com : example.com. IN MX 10 mail.example.com. Lower priority values have higher precedence when multiple MX records exist. A and AAAA Records Resolve the mailserver hostname to IP addresses. Required for the MX record to work. Type: A Name: mail (or hostname without domain) Value: 192.0.2.1 Type: AAAA Name: mail Value: 2001:db8::1 Example for mail.example.com : mail.example.com. IN A 192.0.2.1 mail.example.com. IN AAAA 2001:db8::1 SPF Record (TXT) Authorizes which servers may send mail for the domain. Published as a TXT record. Type: TXT Name: @ Value: v=spf1 mx a ip4:192.0.2.1 ip6:2001:db8::1 ~all Common mechanisms: mx : Authorize MX hosts a : Authorize A record(s) for the domain ip4: , ip6: : Authorize specific IPs include:domain : Include another domain's SPF ~all : Soft fail for others (testing) -all : Hard fail for others (production) Example: example.com. IN TXT \"v=spf1 mx a ip4:192.0.2.1 ~all\" DKIM Record (TXT) Publishes the public key for DKIM verification. The management interface generates the exact record; the name uses a selector and _domainkey . Type: TXT Name: default._domainkey (or selector._domainkey) Value: v=DKIM1; k=rsa; p=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC... Example for example.com with selector default : default._domainkey.example.com. IN TXT \"v=DKIM1; k=rsa; p=...\" DMARC Record (TXT) Defines policy for messages that fail SPF/DKIM and optional reporting. Type: TXT Name: _dmarc Value: v=DMARC1; p=none; rua=mailto:dmarc@example.com Policy ( p= ): none : Monitor only quarantine : Quarantine failures reject : Reject failures Common tags: v=DMARC1 : Version (required) p= : Policy (none, quarantine, reject) rua=mailto:... : Aggregate report address ruf=mailto:... : Forensic report address aspf=r , adkim=r : Alignment (relaxed or strict) Example monitoring policy: _dmarc.example.com. IN TXT \"v=DMARC1; p=none; rua=mailto:dmarc@example.com\" Example reject policy: _dmarc.example.com. IN TXT \"v=DMARC1; p=reject; rua=mailto:dmarc@example.com; aspf=r; adkim=r\" Verification Use dig or nslookup to verify records: dig MX example.com dig A mail.example.com dig TXT example.com dig TXT default._domainkey.example.com dig TXT _dmarc.example.com For context on why these records matter, see DNS and email delivery .","title":"DNS records"},{"location":"reference/dns-records/#dns-records-reference","text":"DNS record types and formats required for the mailserver. Configure these in your domain's DNS zone.","title":"DNS Records Reference"},{"location":"reference/dns-records/#summary","text":"Record Type Name Purpose MX @ Direct incoming mail A mail Resolve mailserver hostname (IPv4) AAAA mail Resolve mailserver hostname (IPv6) TXT (SPF) @ Authorize sending servers TXT (DKIM) default._domainkey Email signature verification TXT (DMARC) _dmarc Authentication policy","title":"Summary"},{"location":"reference/dns-records/#mx-record","text":"Directs incoming mail to the mailserver. Use the value of MAILNAME . Type: MX Name: @ (or domain name) Priority: 10 Value: mail.example.com Example for example.com : example.com. IN MX 10 mail.example.com. Lower priority values have higher precedence when multiple MX records exist.","title":"MX Record"},{"location":"reference/dns-records/#a-and-aaaa-records","text":"Resolve the mailserver hostname to IP addresses. Required for the MX record to work. Type: A Name: mail (or hostname without domain) Value: 192.0.2.1 Type: AAAA Name: mail Value: 2001:db8::1 Example for mail.example.com : mail.example.com. IN A 192.0.2.1 mail.example.com. IN AAAA 2001:db8::1","title":"A and AAAA Records"},{"location":"reference/dns-records/#spf-record-txt","text":"Authorizes which servers may send mail for the domain. Published as a TXT record. Type: TXT Name: @ Value: v=spf1 mx a ip4:192.0.2.1 ip6:2001:db8::1 ~all Common mechanisms: mx : Authorize MX hosts a : Authorize A record(s) for the domain ip4: , ip6: : Authorize specific IPs include:domain : Include another domain's SPF ~all : Soft fail for others (testing) -all : Hard fail for others (production) Example: example.com. IN TXT \"v=spf1 mx a ip4:192.0.2.1 ~all\"","title":"SPF Record (TXT)"},{"location":"reference/dns-records/#dkim-record-txt","text":"Publishes the public key for DKIM verification. The management interface generates the exact record; the name uses a selector and _domainkey . Type: TXT Name: default._domainkey (or selector._domainkey) Value: v=DKIM1; k=rsa; p=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC... Example for example.com with selector default : default._domainkey.example.com. IN TXT \"v=DKIM1; k=rsa; p=...\"","title":"DKIM Record (TXT)"},{"location":"reference/dns-records/#dmarc-record-txt","text":"Defines policy for messages that fail SPF/DKIM and optional reporting. Type: TXT Name: _dmarc Value: v=DMARC1; p=none; rua=mailto:dmarc@example.com Policy ( p= ): none : Monitor only quarantine : Quarantine failures reject : Reject failures Common tags: v=DMARC1 : Version (required) p= : Policy (none, quarantine, reject) rua=mailto:... : Aggregate report address ruf=mailto:... : Forensic report address aspf=r , adkim=r : Alignment (relaxed or strict) Example monitoring policy: _dmarc.example.com. IN TXT \"v=DMARC1; p=none; rua=mailto:dmarc@example.com\" Example reject policy: _dmarc.example.com. IN TXT \"v=DMARC1; p=reject; rua=mailto:dmarc@example.com; aspf=r; adkim=r\"","title":"DMARC Record (TXT)"},{"location":"reference/dns-records/#verification","text":"Use dig or nslookup to verify records: dig MX example.com dig A mail.example.com dig TXT example.com dig TXT default._domainkey.example.com dig TXT _dmarc.example.com For context on why these records matter, see DNS and email delivery .","title":"Verification"},{"location":"reference/environment-variables/","text":"Environment Variables Reference Overview of environment variables used to configure docker-mailserver. Set these in your .env file or in the environment. Basic Configuration Database When using the MySQL service provided by docker-mailserver compose, you do not need to set host, port, or database. You must set MYSQL_PASSWORD . Variable Default Description MYSQL_HOST db MySQL database hostname MYSQL_PORT 3306 MySQL database port MYSQL_DATABASE mailserver MySQL database name MYSQL_USER root (MTA/MDA), mailserver (Web) MySQL database username MYSQL_PASSWORD (empty) MySQL database password MYSQL_TLS_VERIFY_CERT no MySQL TLS certificate verification Mail Server Identity Variable Default Description MAILNAME mail.example.com Primary mail server hostname POSTMASTER postmaster@example.com Postmaster email address RECIPIENT_DELIMITER - Character used for address extensions (e.g., user+tag@domain.com) Redis When using the Redis service provided by docker-mailserver compose or kustomize, you do not need to configure host or port. You must set REDIS_PASSWORD . Variable Default Description REDIS_HOST redis Redis server hostname REDIS_PORT 6379 Redis server port REDIS_PASSWORD (required) Redis server password Authentication Variable Default Description CONTROLLER_PASSWORD (required) Password for RSpamd controller access DOVEADM_API_KEY (required) API key for Dovecot API access Relay Set RELAYHOST to [hostname]:port to route all outgoing mail through an external SMTP server. Leave unset to deliver directly. Variable Default Description RELAYHOST (disabled) SMTP relay host for outgoing mail (e.g. [smtp.example.com]:587 ) RELAY_PASSWD_FILE (disabled) Path to relay authentication file (inside the MTA container) Filter Variable Default Description FILTER_MIME (disabled) Enable MIME header filtering Extended Configuration Service Addresses Variable Default Description FILTER_MILTER_ADDRESS filter:11332 RSpamd milter service address FILTER_WEB_ADDRESS filter:11334 RSpamd web interface address MDA_AUTH_ADDRESS mda:2004 Dovecot authentication service address MDA_IMAP_ADDRESS mda:143 Dovecot IMAP service address MDA_LMTP_ADDRESS mda:2003 Dovecot LMTP service address MDA_MANAGESIEVE_ADDRESS mda:4190 Dovecot ManageSieve service address MDA_DOVEADM_ADDRESS mda:8080 Dovecot API address (default: mda:8080) MTA_HOST mta Postfix MTA hostname MTA_SMTP_ADDRESS mta:25 Postfix SMTP service address MTA_SMTP_SUBMISSION_ADDRESS mta:587 Postfix SMTP submission service address WEB_HTTP_ADDRESS web:80 Web interface HTTP address RSPAMD_DNS_SERVERS round-robin:unbound:53 DNS servers for RSpamd (Kubernetes) mailserver-admin See mailserver-admin configuration reference . PHP Sessions Variable Default Description PHP_SESSION_SAVE_HANDLER redis Session save handler PHP_SESSION_SAVE_PATH tcp://${REDIS_HOST}:${REDIS_PORT}?auth=${REDIS_PASSWORD} Session save path Proxy Protocol Variable Default Description MDA_UPSTREAM_PROXY false Enable Traefik / HAProxy PROXY protocol for MDA (Dovecot) IMAP/POP3 services MTA_UPSTREAM_PROXY false Enable Traefik / HAProxy PROXY protocol for MTA (Postfix) SMTP services When set to true , the mail server accepts the HAProxy PROXY protocol to receive the original client IP when behind a load balancer or reverse proxy.","title":"Environment variables"},{"location":"reference/environment-variables/#environment-variables-reference","text":"Overview of environment variables used to configure docker-mailserver. Set these in your .env file or in the environment.","title":"Environment Variables Reference"},{"location":"reference/environment-variables/#basic-configuration","text":"","title":"Basic Configuration"},{"location":"reference/environment-variables/#database","text":"When using the MySQL service provided by docker-mailserver compose, you do not need to set host, port, or database. You must set MYSQL_PASSWORD . Variable Default Description MYSQL_HOST db MySQL database hostname MYSQL_PORT 3306 MySQL database port MYSQL_DATABASE mailserver MySQL database name MYSQL_USER root (MTA/MDA), mailserver (Web) MySQL database username MYSQL_PASSWORD (empty) MySQL database password MYSQL_TLS_VERIFY_CERT no MySQL TLS certificate verification","title":"Database"},{"location":"reference/environment-variables/#mail-server-identity","text":"Variable Default Description MAILNAME mail.example.com Primary mail server hostname POSTMASTER postmaster@example.com Postmaster email address RECIPIENT_DELIMITER - Character used for address extensions (e.g., user+tag@domain.com)","title":"Mail Server Identity"},{"location":"reference/environment-variables/#redis","text":"When using the Redis service provided by docker-mailserver compose or kustomize, you do not need to configure host or port. You must set REDIS_PASSWORD . Variable Default Description REDIS_HOST redis Redis server hostname REDIS_PORT 6379 Redis server port REDIS_PASSWORD (required) Redis server password","title":"Redis"},{"location":"reference/environment-variables/#authentication","text":"Variable Default Description CONTROLLER_PASSWORD (required) Password for RSpamd controller access DOVEADM_API_KEY (required) API key for Dovecot API access","title":"Authentication"},{"location":"reference/environment-variables/#relay","text":"Set RELAYHOST to [hostname]:port to route all outgoing mail through an external SMTP server. Leave unset to deliver directly. Variable Default Description RELAYHOST (disabled) SMTP relay host for outgoing mail (e.g. [smtp.example.com]:587 ) RELAY_PASSWD_FILE (disabled) Path to relay authentication file (inside the MTA container)","title":"Relay"},{"location":"reference/environment-variables/#filter","text":"Variable Default Description FILTER_MIME (disabled) Enable MIME header filtering","title":"Filter"},{"location":"reference/environment-variables/#extended-configuration","text":"","title":"Extended Configuration"},{"location":"reference/environment-variables/#service-addresses","text":"Variable Default Description FILTER_MILTER_ADDRESS filter:11332 RSpamd milter service address FILTER_WEB_ADDRESS filter:11334 RSpamd web interface address MDA_AUTH_ADDRESS mda:2004 Dovecot authentication service address MDA_IMAP_ADDRESS mda:143 Dovecot IMAP service address MDA_LMTP_ADDRESS mda:2003 Dovecot LMTP service address MDA_MANAGESIEVE_ADDRESS mda:4190 Dovecot ManageSieve service address MDA_DOVEADM_ADDRESS mda:8080 Dovecot API address (default: mda:8080) MTA_HOST mta Postfix MTA hostname MTA_SMTP_ADDRESS mta:25 Postfix SMTP service address MTA_SMTP_SUBMISSION_ADDRESS mta:587 Postfix SMTP submission service address WEB_HTTP_ADDRESS web:80 Web interface HTTP address RSPAMD_DNS_SERVERS round-robin:unbound:53 DNS servers for RSpamd (Kubernetes)","title":"Service Addresses"},{"location":"reference/environment-variables/#mailserver-admin","text":"See mailserver-admin configuration reference .","title":"mailserver-admin"},{"location":"reference/environment-variables/#php-sessions","text":"Variable Default Description PHP_SESSION_SAVE_HANDLER redis Session save handler PHP_SESSION_SAVE_PATH tcp://${REDIS_HOST}:${REDIS_PORT}?auth=${REDIS_PASSWORD} Session save path","title":"PHP Sessions"},{"location":"reference/environment-variables/#proxy-protocol","text":"Variable Default Description MDA_UPSTREAM_PROXY false Enable Traefik / HAProxy PROXY protocol for MDA (Dovecot) IMAP/POP3 services MTA_UPSTREAM_PROXY false Enable Traefik / HAProxy PROXY protocol for MTA (Postfix) SMTP services When set to true , the mail server accepts the HAProxy PROXY protocol to receive the original client IP when behind a load balancer or reverse proxy.","title":"Proxy Protocol"},{"location":"reference/local-address-extension/","text":"Local Address Extension Reference Local address extension (RFC 5233 subaddressing) delivers mail to extended addresses at the same mailbox without extra configuration. A configurable delimiter plus a tag is appended to the local part; all such mail is delivered to the base mailbox. Configuration Variable Default Description RECIPIENT_DELIMITER - Delimiter character Example with default delimiter - : user1-friends@example.com user1-newsletter@example.com Example with RECIPIENT_DELIMITER=+ : user1+friends@example.com user1+newsletter@example.com Sieve Extended addresses can be matched in Sieve. Example for user1-newsletter@example.com : if address :matches :localpart \"to\" \"user1-newsletter*\" { fileinto \"Newsletters\" ; }","title":"Local address extension"},{"location":"reference/local-address-extension/#local-address-extension-reference","text":"Local address extension (RFC 5233 subaddressing) delivers mail to extended addresses at the same mailbox without extra configuration. A configurable delimiter plus a tag is appended to the local part; all such mail is delivered to the base mailbox.","title":"Local Address Extension Reference"},{"location":"reference/local-address-extension/#configuration","text":"Variable Default Description RECIPIENT_DELIMITER - Delimiter character Example with default delimiter - : user1-friends@example.com user1-newsletter@example.com Example with RECIPIENT_DELIMITER=+ : user1+friends@example.com user1+newsletter@example.com","title":"Configuration"},{"location":"reference/local-address-extension/#sieve","text":"Extended addresses can be matched in Sieve. Example for user1-newsletter@example.com : if address :matches :localpart \"to\" \"user1-newsletter*\" { fileinto \"Newsletters\" ; }","title":"Sieve"},{"location":"reference/mailserver-admin-config/","text":"mailserver-admin Configuration Reference Environment variables for the mailserver-admin (web) application. Set in .env or the environment. General Variable Default Description APP_ENV prod Application environment APP_SECRET (random) Secret key (e.g. CSRF) CSRF_ENABLED true Enable CSRF protection TRUSTED_PROXIES \u2014 Comma-separated trusted proxy IPs Database Variable Description MYSQL_USER MySQL user MYSQL_PASSWORD MySQL password MYSQL_HOST MySQL host MYSQL_DATABASE MySQL database name REDIS_HOST Redis host REDIS_PORT Redis port REDIS_PASSWORD Redis password OAuth2 Variable Default Description OAUTH_ENABLED false Enable OAuth2 login OAUTH_CLIENT_ID \u2014 OAuth2 client ID OAUTH_CLIENT_SECRET \u2014 OAuth2 client secret OAUTH_CLIENT_SCOPES \"email profile groups\" Requested scopes OAUTH_AUTHORIZATION_URL \u2014 Authorization URL OAUTH_ACCESS_TOKEN_URL \u2014 Token URL OAUTH_INFOS_URL \u2014 Userinfo URL OAUTH_ADMIN_GROUP \u2014 Group name for admin rights OAUTH_BUTTON_TEXT \"Login with OIDC\" Login button label OAUTH_PATHS_IDENTIFIER sub Field containing user identifier (e.g. email) OAUTH_CREATE_USER false Create user if no match For setting up OAuth2, see How to configure OAuth2 .","title":"mailserver-admin config"},{"location":"reference/mailserver-admin-config/#mailserver-admin-configuration-reference","text":"Environment variables for the mailserver-admin (web) application. Set in .env or the environment.","title":"mailserver-admin Configuration Reference"},{"location":"reference/mailserver-admin-config/#general","text":"Variable Default Description APP_ENV prod Application environment APP_SECRET (random) Secret key (e.g. CSRF) CSRF_ENABLED true Enable CSRF protection TRUSTED_PROXIES \u2014 Comma-separated trusted proxy IPs","title":"General"},{"location":"reference/mailserver-admin-config/#database","text":"Variable Description MYSQL_USER MySQL user MYSQL_PASSWORD MySQL password MYSQL_HOST MySQL host MYSQL_DATABASE MySQL database name REDIS_HOST Redis host REDIS_PORT Redis port REDIS_PASSWORD Redis password","title":"Database"},{"location":"reference/mailserver-admin-config/#oauth2","text":"Variable Default Description OAUTH_ENABLED false Enable OAuth2 login OAUTH_CLIENT_ID \u2014 OAuth2 client ID OAUTH_CLIENT_SECRET \u2014 OAuth2 client secret OAUTH_CLIENT_SCOPES \"email profile groups\" Requested scopes OAUTH_AUTHORIZATION_URL \u2014 Authorization URL OAUTH_ACCESS_TOKEN_URL \u2014 Token URL OAUTH_INFOS_URL \u2014 Userinfo URL OAUTH_ADMIN_GROUP \u2014 Group name for admin rights OAUTH_BUTTON_TEXT \"Login with OIDC\" Login button label OAUTH_PATHS_IDENTIFIER sub Field containing user identifier (e.g. email) OAUTH_CREATE_USER false Create user if no match For setting up OAuth2, see How to configure OAuth2 .","title":"OAuth2"},{"location":"reference/ports/","text":"Ports Reference Services and ports exposed by docker-mailserver. Service Address POP3 (STARTTLS required) 127.0.0.1:110 POP3S 127.0.0.1:995 IMAP (STARTTLS required) 127.0.0.1:143 IMAPS 127.0.0.1:993 SMTP 127.0.0.1:25 Mail Submission (STARTTLS required) 127.0.0.1:587 Management Interface http://127.0.0.1:81/manager/ Webmail http://127.0.0.1:81/webmail/ Rspamd web interface http://127.0.0.1:81/rspamd/ Binding and exposure The base docker-compose.yml creates no host port bindings. bin/production.sh includes docker-compose.production.yml , which binds all mail and web ports to 0.0.0.0 \u2014 making them accessible from the internet. Use host firewall rules to control which source IPs can reach these ports. The management interface, webmail, and Rspamd web interface (port 81) use plain HTTP. Terminate TLS at a reverse proxy before exposing these to a network. See How to configure a reverse proxy .","title":"Ports"},{"location":"reference/ports/#ports-reference","text":"Services and ports exposed by docker-mailserver. Service Address POP3 (STARTTLS required) 127.0.0.1:110 POP3S 127.0.0.1:995 IMAP (STARTTLS required) 127.0.0.1:143 IMAPS 127.0.0.1:993 SMTP 127.0.0.1:25 Mail Submission (STARTTLS required) 127.0.0.1:587 Management Interface http://127.0.0.1:81/manager/ Webmail http://127.0.0.1:81/webmail/ Rspamd web interface http://127.0.0.1:81/rspamd/","title":"Ports Reference"},{"location":"reference/ports/#binding-and-exposure","text":"The base docker-compose.yml creates no host port bindings. bin/production.sh includes docker-compose.production.yml , which binds all mail and web ports to 0.0.0.0 \u2014 making them accessible from the internet. Use host firewall rules to control which source IPs can reach these ports. The management interface, webmail, and Rspamd web interface (port 81) use plain HTTP. Terminate TLS at a reverse proxy before exposing these to a network. See How to configure a reverse proxy .","title":"Binding and exposure"},{"location":"reference/service-architecture/","text":"Service Architecture Reference docker-mailserver consists of the following services: Service Component Role MTA Postfix SMTP (send/receive) MDA Dovecot IMAP/POP3 (mailbox access) Web Admin + Roundcube Management UI and webmail Filter Rspamd Spam filtering SSL \u2014 Certificate generation Database MySQL User and configuration data Redis Redis Caching and sessions Unbound Unbound DNS resolver for filter Fetchmail Fetchmail External mail retrieval (optional) Persistent Volumes Volume Purpose data-db MySQL data (users, aliases, config) data-mail User mailboxes (maildir) data-tls TLS certificates and keys data-filter Rspamd data and statistics data-redis Redis data data-spool Postfix queue and spool Volume Mounts by Service db: data-db:/var/lib/mysql mta: data-tls:/etc/postfix/tls:ro , data-spool:/var/spool/postfix mda: data-mail:/srv/vmail , data-tls:/etc/dovecot/tls:ro filter: data-filter:/var/lib/rspamd redis: data-redis:/data SSL: data-tls:/media/tls:rw For an overview of how these components work together, see Architecture .","title":"Service architecture"},{"location":"reference/service-architecture/#service-architecture-reference","text":"docker-mailserver consists of the following services: Service Component Role MTA Postfix SMTP (send/receive) MDA Dovecot IMAP/POP3 (mailbox access) Web Admin + Roundcube Management UI and webmail Filter Rspamd Spam filtering SSL \u2014 Certificate generation Database MySQL User and configuration data Redis Redis Caching and sessions Unbound Unbound DNS resolver for filter Fetchmail Fetchmail External mail retrieval (optional)","title":"Service Architecture Reference"},{"location":"reference/service-architecture/#persistent-volumes","text":"Volume Purpose data-db MySQL data (users, aliases, config) data-mail User mailboxes (maildir) data-tls TLS certificates and keys data-filter Rspamd data and statistics data-redis Redis data data-spool Postfix queue and spool","title":"Persistent Volumes"},{"location":"reference/service-architecture/#volume-mounts-by-service","text":"db: data-db:/var/lib/mysql mta: data-tls:/etc/postfix/tls:ro , data-spool:/var/spool/postfix mda: data-mail:/srv/vmail , data-tls:/etc/dovecot/tls:ro filter: data-filter:/var/lib/rspamd redis: data-redis:/data SSL: data-tls:/media/tls:rw For an overview of how these components work together, see Architecture .","title":"Volume Mounts by Service"},{"location":"reference/upgrade-changelog/","text":"Upgrade Changelog Version-specific upgrade notes. When upgrading, update manifests in deploy/compose and deploy/kustomize to match the new version (volumes, configuration). Update .env for new or changed environment variables. v7.3 Observability features in mailserver-admin. Set: MDA_DOVEADM_ADDRESS : MDA address for Dovecot API (default: mda:8080 ) DOVEADM_API_KEY : API key for Dovecot API Change at least DOVEADM_API_KEY from the default. v7.1 web: mailserver-admin can generate mobileconfig files for iOS and macOS. Generation uses the same TLS certificate shown to clients. Mount that certificate into the web container to enable generation. v6.x to v7.x web: Image is Alpine-based and uses FrankenPHP instead of PHP-FPM. web: Roundcube path: /var/www/html/webmail \u2192 /opt/roundcube (symlink at /var/www/html/webmail to Roundcube public_html ). web: Admin path: /opt/admin . web: Read-only operation supported; configure tmpfs mounts as in deploy/compose/web.yaml . v5.x to v6.0 Kubernetes deployment is supported via kustomization.yaml . Helm chart deprecated and archived. virus: Removed. Use Rspamd antivirus for antivirus. unbound: Added as DNS resolver for the filter. filter: Base image rspamd/rspamd ; no longer Alpine-based. web: CSRF_ENABLED=false disables CSRF (default: true ). Rootless: web listens on 8080 internally. MTA TLS paths: /etc/postfix/tls/tls.crt , /etc/postfix/tls/tls.key . Submission only on port 587. MDA Base image: dovecot/dovecot ; no longer Alpine-based. TLS paths: /etc/dovecot/tls/tls.crt , /etc/dovecot/tls/tls.key . No DH file. Mail storage: /srv/vmail (was /var/vmail ). Rootless: runs as non-root; ensure mail storage and TLS are accessible by UID/GID 1000. Internal ports: IMAP 31143, POP3 31110, IMAPS 31993, POP3S 31995 (internal only). FTS enabled by default; FTS_* variables removed. POP3 and IMAP always enabled; POP3_ENABLED and IMAP_ENABLED removed.","title":"Upgrade changelog"},{"location":"reference/upgrade-changelog/#upgrade-changelog","text":"Version-specific upgrade notes. When upgrading, update manifests in deploy/compose and deploy/kustomize to match the new version (volumes, configuration). Update .env for new or changed environment variables.","title":"Upgrade Changelog"},{"location":"reference/upgrade-changelog/#v73","text":"Observability features in mailserver-admin. Set: MDA_DOVEADM_ADDRESS : MDA address for Dovecot API (default: mda:8080 ) DOVEADM_API_KEY : API key for Dovecot API Change at least DOVEADM_API_KEY from the default.","title":"v7.3"},{"location":"reference/upgrade-changelog/#v71","text":"web: mailserver-admin can generate mobileconfig files for iOS and macOS. Generation uses the same TLS certificate shown to clients. Mount that certificate into the web container to enable generation.","title":"v7.1"},{"location":"reference/upgrade-changelog/#v6x-to-v7x","text":"web: Image is Alpine-based and uses FrankenPHP instead of PHP-FPM. web: Roundcube path: /var/www/html/webmail \u2192 /opt/roundcube (symlink at /var/www/html/webmail to Roundcube public_html ). web: Admin path: /opt/admin . web: Read-only operation supported; configure tmpfs mounts as in deploy/compose/web.yaml .","title":"v6.x to v7.x"},{"location":"reference/upgrade-changelog/#v5x-to-v60","text":"Kubernetes deployment is supported via kustomization.yaml . Helm chart deprecated and archived. virus: Removed. Use Rspamd antivirus for antivirus. unbound: Added as DNS resolver for the filter. filter: Base image rspamd/rspamd ; no longer Alpine-based. web: CSRF_ENABLED=false disables CSRF (default: true ). Rootless: web listens on 8080 internally.","title":"v5.x to v6.0"},{"location":"reference/upgrade-changelog/#mta","text":"TLS paths: /etc/postfix/tls/tls.crt , /etc/postfix/tls/tls.key . Submission only on port 587.","title":"MTA"},{"location":"reference/upgrade-changelog/#mda","text":"Base image: dovecot/dovecot ; no longer Alpine-based. TLS paths: /etc/dovecot/tls/tls.crt , /etc/dovecot/tls/tls.key . No DH file. Mail storage: /srv/vmail (was /var/vmail ). Rootless: runs as non-root; ensure mail storage and TLS are accessible by UID/GID 1000. Internal ports: IMAP 31143, POP3 31110, IMAPS 31993, POP3S 31995 (internal only). FTS enabled by default; FTS_* variables removed. POP3 and IMAP always enabled; POP3_ENABLED and IMAP_ENABLED removed.","title":"MDA"},{"location":"reference/user-roles/","text":"User Roles Reference mailserver-admin defines three roles with different permissions. Admin Manage all domains, users, aliases, and DKIM Full access to all features Domain Admin Manage users, aliases, and fetchmail within their assigned domain only Cannot add, edit, or delete domains Cannot manage DKIM User Log in to the application Manage own fetchmail accounts Change own password (subject to password policy) Cannot manage users, aliases, or domains No access to DKIM or domain configuration","title":"User roles"},{"location":"reference/user-roles/#user-roles-reference","text":"mailserver-admin defines three roles with different permissions.","title":"User Roles Reference"},{"location":"reference/user-roles/#admin","text":"Manage all domains, users, aliases, and DKIM Full access to all features","title":"Admin"},{"location":"reference/user-roles/#domain-admin","text":"Manage users, aliases, and fetchmail within their assigned domain only Cannot add, edit, or delete domains Cannot manage DKIM","title":"Domain Admin"},{"location":"reference/user-roles/#user","text":"Log in to the application Manage own fetchmail accounts Change own password (subject to password policy) Cannot manage users, aliases, or domains No access to DKIM or domain configuration","title":"User"},{"location":"tutorials/getting-started/","text":"Getting Started This tutorial walks you through installing docker-mailserver with Docker Compose and creating your first mailbox. By the end you will have a running mailserver and access to the management interface. What we will do: Configure the environment, start the services, run the setup wizard, and log in to the management interface. Prerequisites Docker and Docker Compose installed A domain name (for later DNS configuration) Ports 25, 110, 143, 587, 993, 995, 81 available Step 1: Obtain the project Download the latest release from the Releases page and unpack the archive ( release-vX.X.X.tar.gz ), or clone the repository: git clone https://github.com/jeboehm/docker-mailserver.git cd docker-mailserver Do not use the latest container image tag for production. Use a specific version tag (e.g. jeboehm/mailserver-mta:6.3 ). Step 2: Configure environment variables Copy the example environment file: cp .env.dist .env Edit .env and set at least: MYSQL_PASSWORD (required when using the included database) REDIS_PASSWORD (required when using the included Redis) CONTROLLER_PASSWORD (required for Rspamd) DOVEADM_API_KEY (required for Dovecot API) Use strong, unique values for each password \u2014 do not leave them empty or use the same value for all. These credentials protect internal service communication. For a full list of variables, see Environment variables reference . Step 3: Pull and start services Pull the container images: bin/production.sh pull Start all services and wait for them to be ready: bin/production.sh up -d --wait You should see the containers start. Wait until health checks pass. You can check status with bin/production.sh ps . Step 4: Run the setup wizard Run the setup script to create your first account and an admin user: bin/production.sh run --rm web setup.sh The wizard will ask for configuration details, create your first email address, and create an admin user for the management interface. Follow the prompts. Step 5: Open the management interface Open a browser and go to: Management interface: http://127.0.0.1:81/manager/ Webmail: http://127.0.0.1:81/webmail/ Log in with the admin credentials you set in the wizard. You should see the dashboard. Note: Port 81 uses plain HTTP. For production, place the mailserver behind a reverse proxy that terminates TLS. See How to configure a reverse proxy . Step 6: Check the dashboard On the dashboard you will see an overview of the mailserver: domains, users, and quick links. From here you can add domains, users, and aliases. Next steps Configure DNS records for your domain so other servers can deliver mail to you. See DNS records reference and How to configure DNS . Replace self-signed TLS certificates with valid certificates. See How to configure TLS certificates . Add more users or domains via the management interface. See the Administration how-to guides . For a list of exposed ports and services, see Ports reference .","title":"Getting Started"},{"location":"tutorials/getting-started/#getting-started","text":"This tutorial walks you through installing docker-mailserver with Docker Compose and creating your first mailbox. By the end you will have a running mailserver and access to the management interface. What we will do: Configure the environment, start the services, run the setup wizard, and log in to the management interface.","title":"Getting Started"},{"location":"tutorials/getting-started/#prerequisites","text":"Docker and Docker Compose installed A domain name (for later DNS configuration) Ports 25, 110, 143, 587, 993, 995, 81 available","title":"Prerequisites"},{"location":"tutorials/getting-started/#step-1-obtain-the-project","text":"Download the latest release from the Releases page and unpack the archive ( release-vX.X.X.tar.gz ), or clone the repository: git clone https://github.com/jeboehm/docker-mailserver.git cd docker-mailserver Do not use the latest container image tag for production. Use a specific version tag (e.g. jeboehm/mailserver-mta:6.3 ).","title":"Step 1: Obtain the project"},{"location":"tutorials/getting-started/#step-2-configure-environment-variables","text":"Copy the example environment file: cp .env.dist .env Edit .env and set at least: MYSQL_PASSWORD (required when using the included database) REDIS_PASSWORD (required when using the included Redis) CONTROLLER_PASSWORD (required for Rspamd) DOVEADM_API_KEY (required for Dovecot API) Use strong, unique values for each password \u2014 do not leave them empty or use the same value for all. These credentials protect internal service communication. For a full list of variables, see Environment variables reference .","title":"Step 2: Configure environment variables"},{"location":"tutorials/getting-started/#step-3-pull-and-start-services","text":"Pull the container images: bin/production.sh pull Start all services and wait for them to be ready: bin/production.sh up -d --wait You should see the containers start. Wait until health checks pass. You can check status with bin/production.sh ps .","title":"Step 3: Pull and start services"},{"location":"tutorials/getting-started/#step-4-run-the-setup-wizard","text":"Run the setup script to create your first account and an admin user: bin/production.sh run --rm web setup.sh The wizard will ask for configuration details, create your first email address, and create an admin user for the management interface. Follow the prompts.","title":"Step 4: Run the setup wizard"},{"location":"tutorials/getting-started/#step-5-open-the-management-interface","text":"Open a browser and go to: Management interface: http://127.0.0.1:81/manager/ Webmail: http://127.0.0.1:81/webmail/ Log in with the admin credentials you set in the wizard. You should see the dashboard. Note: Port 81 uses plain HTTP. For production, place the mailserver behind a reverse proxy that terminates TLS. See How to configure a reverse proxy .","title":"Step 5: Open the management interface"},{"location":"tutorials/getting-started/#step-6-check-the-dashboard","text":"On the dashboard you will see an overview of the mailserver: domains, users, and quick links. From here you can add domains, users, and aliases.","title":"Step 6: Check the dashboard"},{"location":"tutorials/getting-started/#next-steps","text":"Configure DNS records for your domain so other servers can deliver mail to you. See DNS records reference and How to configure DNS . Replace self-signed TLS certificates with valid certificates. See How to configure TLS certificates . Add more users or domains via the management interface. See the Administration how-to guides . For a list of exposed ports and services, see Ports reference .","title":"Next steps"}]}